{"ast":null,"code":"import pageheader from \"@/components/page-header.vue\";\nimport apiClient from \"@/plugins/axios\";\nimport CryptoJS from 'crypto-js';\nimport common from \"@/components/common/JavaScripCommon\";\nexport default {\n  name: \"HOMEPAGE\",\n  components: {\n    pageheader\n  },\n  data() {\n    return {\n      viewdialog: false,\n      titleDialog: '',\n      form: false,\n      towerId: 0,\n      dataInfo: {\n        infoRoomAvailable: '',\n        infoRoomExpireContract: \"\",\n        infoRoomNoInvoice: \"\",\n        infoRoomPaid: \"\",\n        infoRoomUnpaid: \"\",\n        roomAvailable: 0,\n        roomExpireContract: 0,\n        roomNoInvoice: 0,\n        roomPaid: 0,\n        roomUnpaid: 0\n      },\n      headersTable: [{\n        title: 'Số phòng',\n        value: 'numberOfRoom',\n        sortable: true\n      }, {\n        title: 'Số tiền',\n        value: 'soTien',\n        sortable: true\n      }, {\n        title: 'Ngày thanh toán',\n        value: 'ngayThanhToan',\n        sortable: true\n      }, {\n        title: '',\n        value: 'actions',\n        sortable: false\n      }],\n      RequestPaymentConfirmation: []\n    };\n  },\n  created() {\n    const idtower = this.$route.params.idtower;\n    const DecodingIdTower = CryptoJS.enc.Utf8.stringify(CryptoJS.enc.Base64.parse(idtower));\n    this.towerId = DecodingIdTower;\n    this.getInfo();\n    this.GetRequestPaymentConfirmation();\n  },\n  methods: {\n    getInfo() {\n      apiClient.get(`/Room/GetInfoHome?towerID=${this.towerId}`).then(response => {\n        this.dataInfo = response.data;\n      }).catch(error => {\n        this.message = \"Lấy thông tin bị lỗi \" + error.response?.data?.message || error.message;\n        this.snackbar = true;\n        this.snackbarColor = 'red';\n      });\n    },\n    GetRequestPaymentConfirmation() {\n      apiClient.get(`/Bill/GetRequestPayment?landlordId=${1}`).then(response => {\n        this.RequestPaymentConfirmation = response.data;\n        console.log(this.RequestPaymentConfirmation);\n      }).catch(error => {\n        this.message = \"Lấy thông tin bị lỗi \" + error.response?.data?.message || error.message;\n        this.snackbar = true;\n        this.snackbarColor = 'red';\n      });\n    },\n    FormatPrice(price) {\n      if (price) return common.formatTablePrice(price);\n    }\n  }\n};","map":{"version":3,"names":["pageheader","apiClient","CryptoJS","common","name","components","data","viewdialog","titleDialog","form","towerId","dataInfo","infoRoomAvailable","infoRoomExpireContract","infoRoomNoInvoice","infoRoomPaid","infoRoomUnpaid","roomAvailable","roomExpireContract","roomNoInvoice","roomPaid","roomUnpaid","headersTable","title","value","sortable","RequestPaymentConfirmation","created","idtower","$route","params","DecodingIdTower","enc","Utf8","stringify","Base64","parse","getInfo","GetRequestPaymentConfirmation","methods","get","then","response","catch","error","message","snackbar","snackbarColor","console","log","FormatPrice","price","formatTablePrice"],"sources":["D:\\Code\\BoardingHouseManagement\\BoardingHouseManagement\\FrontEnd\\src\\views\\Manage\\Page\\HomePage.vue"],"sourcesContent":["<style scoped>\r\n    .custom-table {\r\n        height: 290px; /* Giới hạn chiều cao tối đa */\r\n        overflow-y: auto; /* Hiển thị thanh cuộn dọc nếu vượt quá */\r\n    }\r\n    .custom-table thead tr {\r\n        position: sticky !important; /* Giữ cố định header */\r\n        top: 0; /* Cố định ở đỉnh */\r\n        z-index: 1100; /* Đảm bảo header nằm trên nội dung */\r\n        background-color: white; /* Màu nền cho header */\r\n    }\r\n</style>\r\n<script>\r\n    import pageheader from \"@/components/page-header.vue\"\r\n    import apiClient from \"@/plugins/axios\";\r\n    import CryptoJS from 'crypto-js';\r\n    import common from \"@/components/common/JavaScripCommon\"\r\n\r\n\r\n    export default {\r\n        name: \"HOMEPAGE\",\r\n        components: {\r\n            pageheader\r\n        },\r\n        data(){\r\n            return{\r\n                viewdialog: false,\r\n                titleDialog:'',\r\n                form: false,\r\n                towerId: 0,\r\n                dataInfo:{\r\n                    infoRoomAvailable: '',\r\n                    infoRoomExpireContract: \"\",\r\n                    infoRoomNoInvoice: \"\", \r\n                    infoRoomPaid: \"\",\r\n                    infoRoomUnpaid: \"\",\r\n                    roomAvailable: 0,\r\n                    roomExpireContract: 0,\r\n                    roomNoInvoice: 0,\r\n                    roomPaid: 0,\r\n                    roomUnpaid: 0\r\n                },\r\n                headersTable:[\r\n                    {title: 'Số phòng',value:'numberOfRoom',sortable: true},\r\n                    {title: 'Số tiền',value: 'soTien',sortable: true},\r\n                    {title: 'Ngày thanh toán', value: 'ngayThanhToan',sortable: true},\r\n                    {title: '',value: 'actions',sortable: false}\r\n                ],\r\n                RequestPaymentConfirmation: [\r\n                    \r\n                ],\r\n            }\r\n        },\r\n        created(){\r\n            const idtower = this.$route.params.idtower;\r\n            const DecodingIdTower = CryptoJS.enc.Utf8.stringify(CryptoJS.enc.Base64.parse(idtower));\r\n            this.towerId = DecodingIdTower;\r\n            this.getInfo();\r\n            this.GetRequestPaymentConfirmation();\r\n        },\r\n        methods:{\r\n            getInfo(){\r\n                apiClient.get(`/Room/GetInfoHome?towerID=${this.towerId}`)\r\n                        .then(response=>{\r\n                            this.dataInfo = response.data;\r\n                        })\r\n                        .catch(error=>{\r\n                            this.message = \"Lấy thông tin bị lỗi \" + error.response?.data?.message || error.message;\r\n                            this.snackbar = true;\r\n                            this.snackbarColor = 'red';\r\n                        })\r\n            },\r\n            GetRequestPaymentConfirmation(){\r\n                apiClient.get(`/Bill/GetRequestPayment?landlordId=${1}`)\r\n                        .then(response=>{\r\n                            this.RequestPaymentConfirmation = response.data;\r\n                            console.log(this.RequestPaymentConfirmation);\r\n                        })\r\n                        .catch(error=>{\r\n                            this.message = \"Lấy thông tin bị lỗi \" + error.response?.data?.message || error.message;\r\n                            this.snackbar = true;\r\n                            this.snackbarColor = 'red';\r\n                        })\r\n            },\r\n            FormatPrice(price) {\r\n                if(price)\r\n                return common.formatTablePrice(price);\r\n            },\r\n        }\r\n}\r\n</script>\r\n\r\n<template>\r\n    <pageheader title=\"\" pageTitle=\"Trang chủ\" />\r\n    <BRow>\r\n        <BCol class=\"col-sm-4\">\r\n            <BCard class=\"statistics-card-1\" no-body>\r\n                <BCardHeader class=\"d-flex align-items-center justify-content-between py-2\">\r\n                    <h5>Số phòng đã thanh toán</h5>\r\n                </BCardHeader>\r\n                <BCardBody class=\"p-3\">\r\n                    <div class=\"d-flex align-items-center\">\r\n                        <div class=\"avtar bg-brand-color-1 text-white me-3\">\r\n                            <i class=\"ph-duotone ph-currency-dollar f-26\"></i>\r\n                        </div>\r\n                        <h3 class=\"f-w-300 d-flex align-items-center m-b-0\">{{ dataInfo.roomUnpaid }}</h3>\r\n                    </div>\r\n                    <p class=\"text-muted mb-2 text-sm mt-3\">{{dataInfo.infoRoomUnpaid ? 'Các phòng đã thanh toán: ' + dataInfo.infoRoomUnpaid : 'Không có phòng nào đã thanh toán'}}</p>\r\n                    <div class=\"progress\" style=\"height: 7px\">\r\n                        <div class=\"progress-bar bg-brand-color-3\" role=\"progressbar\" style=\"width: 75%\" aria-valuenow=\"75\" aria-valuemin=\"0\" aria-valuemax=\"100\"></div>\r\n                    </div>\r\n                </BCardBody>\r\n            </BCard>\r\n        </BCol>\r\n        <BCol class=\"col-sm-4\">\r\n            <BCard class=\"statistics-card-1\" no-body>\r\n                <BCardHeader class=\"d-flex align-items-center justify-content-between py-2\">\r\n                    <h5>Số phòng chưa thanh toán</h5>\r\n                </BCardHeader>\r\n                <BCardBody class=\"p-3\">\r\n                    <div class=\"d-flex align-items-center\">\r\n                        <div class=\"avtar bg-brand-color-1 text-white me-3\">\r\n                            <i class=\"ph-duotone ph-currency-dollar f-26\"></i>\r\n                        </div>\r\n                        <h3 class=\"f-w-300 d-flex align-items-center m-b-0\">{{ dataInfo.roomPaid }}</h3>\r\n                    </div>\r\n                    <p class=\"text-muted mb-2 text-sm mt-3\">{{dataInfo.infoRoomPaid ? 'Các phòng chưa thanh toán: ' + dataInfo.infoRoomPaid : 'Không có phòng nào chưa thanh toán'}}</p>\r\n                    <div class=\"progress\" style=\"height: 7px\">\r\n                        <div class=\"progress-bar bg-brand-color-3\" role=\"progressbar\" style=\"width: 75%\" aria-valuenow=\"75\" aria-valuemin=\"0\" aria-valuemax=\"100\"></div>\r\n                    </div>\r\n                </BCardBody>\r\n            </BCard>\r\n        </BCol>\r\n        <BCol class=\"col-sm-4\">\r\n            <BCard class=\"statistics-card-1\" no-body>\r\n                <BCardHeader class=\"d-flex align-items-center justify-content-between py-2\">\r\n                    <h5>Số phòng chưa có hoá đơn</h5>\r\n                </BCardHeader>\r\n                <BCardBody class=\"p-3\">\r\n                    <div class=\"d-flex align-items-center\">\r\n                        <div class=\"avtar bg-brand-color-1 text-white me-3\">\r\n                            <i class=\"ph-duotone ph-currency-dollar f-26\"></i>\r\n                        </div>\r\n                        <h3 class=\"f-w-300 d-flex align-items-center m-b-0\">{{ dataInfo.roomNoInvoice }}</h3>\r\n                    </div>\r\n                    <p class=\"text-muted mb-2 text-sm mt-3\">{{dataInfo.infoRoomNoInvoice ? 'Các phòng chưa có hoá đơn: ' + dataInfo.infoRoomNoInvoice : 'Không có phòng nào chưa có hoá đơn'}}</p>\r\n                    <div class=\"progress\" style=\"height: 7px\">\r\n                        <div class=\"progress-bar bg-brand-color-3\" role=\"progressbar\" style=\"width: 75%\" aria-valuenow=\"75\" aria-valuemin=\"0\" aria-valuemax=\"100\"></div>\r\n                    </div>\r\n                </BCardBody>\r\n            </BCard>\r\n        </BCol>\r\n        <BCol class=\"col-sm-4\">\r\n            <div class=\"card statistics-card-1\">\r\n                <div class=\"card-body\">\r\n                    <div class=\"d-flex align-items-center\">\r\n                        <div class=\"avtar bg-brand-color-1 text-white me-3\">\r\n                            <i class=\"ph-duotone ph-currency-dollar f-26\"></i>\r\n                        </div>\r\n                        <div>\r\n                            <p class=\"text-muted mb-0\">Số phòng còn trống</p>\r\n                            <div class=\"d-flex align-items-end\">\r\n                                <h2 class=\"mb-0 f-w-500\">{{ dataInfo.roomAvailable }}</h2>\r\n                                <span class=\"badge bg-light-danger ms-2\">{{dataInfo.infoRoomAvailable ? 'Phòng: ' + dataInfo.infoRoomAvailable : 'Không có phòng nào còn trống'}}</span>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class=\"card statistics-card-1\">\r\n                <div class=\"card-body\">\r\n                    <div class=\"d-flex align-items-center\">\r\n                        <div class=\"avtar bg-brand-color-1 text-white me-3\">\r\n                            <i class=\"ph-duotone ph-currency-dollar f-26\"></i>\r\n                        </div>\r\n                        <div>\r\n                            <p class=\"text-muted mb-0\">Số phòng sắp hết hạn hợp đồng</p>\r\n                            <div class=\"d-flex align-items-end\">\r\n                                <h2 class=\"mb-0 f-w-500\">{{ dataInfo.roomExpireContract }}</h2>\r\n                                <span class=\"badge bg-light-warning ms-2\">{{dataInfo.infoRoomExpireContract ? 'Phòng: ' + dataInfo.infoRoomExpireContract : 'Không có phòng nào sắp hết hạn hợp đồng'}}</span>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class=\"card statistics-card-1\">\r\n                <div class=\"card-body\">\r\n                    <div class=\"d-flex align-items-center\">\r\n                        <div class=\"avtar bg-brand-color-1 text-white me-3\">\r\n                            <i class=\"ph-duotone ph-currency-dollar f-26\"></i>\r\n                        </div>\r\n                        <div>\r\n                            <p class=\"text-muted mb-0\">Tổng số tiền đã thu được</p>\r\n                            <div class=\"d-flex align-items-end\">\r\n                                <h2 class=\"mb-0 f-w-500\">4 <small class=\"text-muted\">VND</small></h2>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </BCol>\r\n        <BCol class=\"col-sm-8\">\r\n            <BCard>\r\n                <BCardHeader class=\"p-0\">\r\n                    <h4>Các phòng đang chờ xác nhận thanh toán</h4>\r\n                </BCardHeader>\r\n                <BCardBody class=\"p-0\">\r\n                    <v-data-table \r\n                        :headers = \"headersTable\"\r\n                        :items=\"RequestPaymentConfirmation\"\r\n                        class=\"border-sm rounded-lg custom-table\"\r\n                        hide-default-footer>\r\n                        <template v-slot:[`item.actions`]=\"{ item }\">\r\n                            <button class=\"btn btn-sm btn-link-danger\" @click=\"Refuse(item.id)\">Từ chối</button>\r\n                            <button class=\"btn btn-sm btn-primary ms-1\" @click=\"Received(item.id)\">Đã nhận</button>\r\n                        </template>\r\n                    </v-data-table>\r\n                </BCardBody>\r\n            </BCard>\r\n        </BCol>\r\n    </BRow>\r\n</template>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}