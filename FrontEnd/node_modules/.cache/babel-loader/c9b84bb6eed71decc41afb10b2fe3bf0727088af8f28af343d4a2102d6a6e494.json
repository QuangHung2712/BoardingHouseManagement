{"ast":null,"code":"import \"core-js/modules/esnext.iterator.constructor.js\";\nimport \"core-js/modules/esnext.iterator.filter.js\";\nimport \"core-js/modules/esnext.iterator.reduce.js\";\nimport pageheader from \"@/components/page-header.vue\";\nimport apiClient from \"@/plugins/axios\";\nimport Swal from \"sweetalert2\";\nimport CryptoJS from 'crypto-js';\nimport common from \"@/components/common/JavaScripCommon\";\nexport default {\n  name: \"PRODUCT-LIST\",\n  components: {\n    pageheader\n  },\n  data() {\n    return {\n      viewdialog: false,\n      titleDialog: '',\n      form: false,\n      headersTable: [{\n        title: 'STT',\n        value: 'stt',\n        sortable: true\n      }, {\n        title: 'Tên khách thuê',\n        value: 'customerName',\n        sortable: true\n      }, {\n        title: 'Số phòng',\n        value: 'numberOfRoom',\n        sortable: true\n      }, {\n        title: 'Số tiền',\n        value: 'totalAmount',\n        sortable: true\n      }, {\n        title: 'Tháng',\n        value: 'time',\n        sortable: true\n      }, {\n        title: 'Ngày thanh toán',\n        value: 'paymentDate',\n        sortable: true\n      }, {\n        title: 'Trạng thái',\n        value: 'status',\n        sortable: true\n      }, {\n        title: 'Hành đồng',\n        value: 'actions',\n        sortable: false\n      }],\n      billData: [],\n      selectBill: {\n        id: 0,\n        numberOfRoom: '',\n        priceRoom: 0,\n        addressTower: '',\n        amount: 0,\n        date: '',\n        pathImgQRPay: '',\n        stk: '',\n        status: 0,\n        service: [{\n          id: 0,\n          isOldNewNumber: false,\n          name: '',\n          newNumber: null,\n          oldNumber: null,\n          unitPrice: 0,\n          usageNumber: 1\n        }],\n        arises: [{\n          id: 0,\n          amount: 0,\n          reason: ''\n        }]\n      },\n      CalculateRoom: [],\n      searchCustomer: '',\n      searchRoom: '',\n      searchDate: '',\n      searchStatus: null,\n      viewdialogEdit: false,\n      viewdialogCalculateRoomCharges: false,\n      towerId: 0,\n      message: '',\n      snackbar: false,\n      snackbarColor: ''\n    };\n  },\n  created() {\n    const idtower = this.$route.params.idtower;\n    const DecodingIdTower = CryptoJS.enc.Utf8.stringify(CryptoJS.enc.Base64.parse(idtower));\n    this.towerId = DecodingIdTower;\n    this.getAllBill();\n  },\n  computed: {\n    filteredBills() {\n      return this.billData.filter(bill => {\n        const matchesCustomer = this.searchCustomer ? bill.customerName?.toLowerCase().includes(this.searchCustomer.toLowerCase()) : true;\n        const matchesRoom = this.searchRoom ? bill.numberOfRoom?.toLowerCase().includes(this.searchRoom.toLowerCase()) : true;\n        const matchesDate = this.searchDate ? bill.time === this.searchDate.split('-').reverse().join('/') : true;\n        const matchesStatus = this.searchStatus ? bill.status?.toLowerCase() === this.searchStatus.toLowerCase() : true;\n        return matchesCustomer && matchesRoom && matchesDate && matchesStatus;\n      });\n    }\n  },\n  methods: {\n    deleteBill(id, name) {\n      const swalWithBootstrapButtons = Swal.mixin({\n        customClass: {\n          confirmButton: \"btn btn-success\",\n          cancelButton: \"btn btn-danger ml-2\"\n        },\n        buttonsStyling: false\n      });\n      swalWithBootstrapButtons.fire({\n        title: \"Bạn có chắc chắn không?\",\n        text: `Bạn đang muốn xóa hoá đơn của phòng: ${name}`,\n        icon: \"warning\",\n        confirmButtonText: \"Có!\",\n        cancelButtonText: \"Không!\",\n        showCancelButton: true\n      }).then(confirm => {\n        if (confirm.value) {\n          apiClient.delete(`/Bill/Delete/${id}`).then(reponse => {\n            if (reponse.status) {\n              swalWithBootstrapButtons.fire(\"Xóa thành công!\", `Đã xóa thành công hoá đơn của phòng: ${name}`, \"success\");\n              this.getAllBill();\n            }\n          }).catch(error => {\n            swalWithBootstrapButtons.fire(\"Xóa không thành công\", ` ${error.response?.data?.message || error.message}`, \"error\");\n          });\n        } else if (/* Read more about handling dismissals below */confirm.dismiss === Swal.DismissReason.cancel) return;\n      });\n    },\n    required(v) {\n      return !!v || 'Vui lòng không để trống';\n    },\n    DetailBill(idBill) {\n      apiClient.get(`/Bill/GetDetail?billId=${idBill}`).then(response => {\n        this.selectBill = response.data;\n      }).catch(error => {\n        this.message = \"Lấy thông tin hoá đơn bị lỗi: \" + error.response?.data?.message || error.message;\n        this.snackbar = true;\n        this.snackbarColor = 'red';\n      });\n    },\n    getStatusClass(status) {\n      switch (status) {\n        case 'Đã thanh toán':\n          return 'badge bg-light-success ms-2';\n        // class dành cho trạng thái Active\n        case 'Chưa thanh toán':\n          return 'badge bg-light-danger ms-2';\n        // class dành cho trạng thái Inactive\n        default:\n          return 'badge bg-light-warning';\n        // class mặc định\n      }\n    },\n    formatDate(dateString) {\n      if (!dateString) return '';\n      const [month, year] = dateString.split('/'); // Tách MM/YYYY\n      //if (!month || !year) return ''; // Xử lý nếu không đúng định dạng\n      return `${year}-${month.padStart(2, '0')}`; // Trả về định dạng YYYY-MM\n    },\n    getAllBill() {\n      apiClient.get(`/Bill/GetAll?towerId=${this.towerId}`).then(response => {\n        this.billData = response.data;\n      }).catch(error => {\n        this.snackbar = true;\n        this.message = 'Lấy hoá đơn bị lỗi ' + error.response?.data?.message || error.message;\n        this.snackbarColor = 'red';\n      });\n    },\n    FormatTablePrice(price) {\n      if (price) return common.formatTablePrice(price);\n    },\n    btnUpdate(idBill) {\n      apiClient.get(`/Bill/GetDetail?billId=${idBill}`).then(response => {\n        this.selectBill = response.data;\n      }).catch(error => {\n        this.message = \"Lấy thông tin hoá đơn bị lỗi: \" + error.response?.data?.message || error.message;\n        this.snackbar = true;\n        this.snackbarColor = 'red';\n      });\n    },\n    saveUpdate() {\n      this.selectBill.sumArises = this.selectBill.arises.reduce((sum, item) => sum + (item.amount || 0), 0);\n      apiClient.put(`/Bill/Update`, this.selectBill).then(() => {\n        this.message = \"Sửa hóa đơn thành công\";\n        this.snackbar = true;\n        this.snackbarColor = 'green';\n        this.viewdialogEdit = false;\n        this.getAllBill();\n      }).catch(error => {\n        this.message = \"Sửa hoá đơn bị lỗi: \" + error.response?.data?.message || error;\n        this.snackbar = true;\n        this.snackbarColor = 'red';\n      });\n    },\n    btnCalculateRoom() {\n      apiClient.get(`/Bill/CalculateRoom?towerId=${this.towerId}`).then(response => {\n        this.CalculateRoom = response.data;\n      }).catch(error => {\n        this.message = \"Đã xảy ra lỗi: \" + error.response?.data?.message || error;\n        this.snackbar = true;\n        this.snackbarColor = 'red';\n      });\n    },\n    SendInvoice() {\n      this.CalculateRoom = {};\n      apiClient.post(`/Bill/SendInvoice`, this.CalculateRoom).then(() => {\n        this.message = \"Tính tiền cho các phòng thành công. Hóa đơn đã được gửi đến khách thuê. Bạn hãy thi thoảng vào trang web để theo dõi trạng thái thanh toán của các khách thuê\";\n        this.snackbar = true;\n        this.snackbarColor = 'green';\n        this.viewdialogCalculateRoomCharges = false;\n        this.getAllBill();\n      }).catch(error => {\n        this.message = \"Tính tiền bị lỗi: \" + error.response?.data?.message || error;\n        this.snackbar = true;\n        this.snackbarColor = 'red';\n      });\n    }\n  }\n};","map":{"version":3,"names":["pageheader","apiClient","Swal","CryptoJS","common","name","components","data","viewdialog","titleDialog","form","headersTable","title","value","sortable","billData","selectBill","id","numberOfRoom","priceRoom","addressTower","amount","date","pathImgQRPay","stk","status","service","isOldNewNumber","newNumber","oldNumber","unitPrice","usageNumber","arises","reason","CalculateRoom","searchCustomer","searchRoom","searchDate","searchStatus","viewdialogEdit","viewdialogCalculateRoomCharges","towerId","message","snackbar","snackbarColor","created","idtower","$route","params","DecodingIdTower","enc","Utf8","stringify","Base64","parse","getAllBill","computed","filteredBills","filter","bill","matchesCustomer","customerName","toLowerCase","includes","matchesRoom","matchesDate","time","split","reverse","join","matchesStatus","methods","deleteBill","swalWithBootstrapButtons","mixin","customClass","confirmButton","cancelButton","buttonsStyling","fire","text","icon","confirmButtonText","cancelButtonText","showCancelButton","then","confirm","delete","reponse","catch","error","response","dismiss","DismissReason","cancel","required","v","DetailBill","idBill","get","getStatusClass","formatDate","dateString","month","year","padStart","FormatTablePrice","price","formatTablePrice","btnUpdate","saveUpdate","sumArises","reduce","sum","item","put","btnCalculateRoom","SendInvoice","post"],"sources":["D:\\Code\\BoardingHouseManagement\\BoardingHouseManagement\\FrontEnd\\src\\views\\Manage\\Page\\Bill.vue"],"sourcesContent":["<style scoped>\r\n    .table{\r\n        text-align: center;\r\n    }\r\n</style>\r\n\r\n<script>\r\n    import pageheader from \"@/components/page-header.vue\"\r\n    import apiClient from \"@/plugins/axios\";\r\n    import Swal from \"sweetalert2\";\r\n    import CryptoJS from 'crypto-js';\r\n    import common from \"@/components/common/JavaScripCommon\"\r\n\r\n\r\nexport default {\r\n    name: \"PRODUCT-LIST\",\r\n    components: {\r\n        pageheader\r\n    },\r\n    data(){\r\n        return{\r\n            viewdialog: false,\r\n            titleDialog:'',\r\n            form: false,\r\n            headersTable:[\r\n                    {title: 'STT', value: 'stt',sortable: true},\r\n                    {title: 'Tên khách thuê',value:'customerName',sortable: true},\r\n                    {title: 'Số phòng',value: 'numberOfRoom',sortable: true},\r\n                    {title: 'Số tiền',value: 'totalAmount',sortable: true},\r\n                    {title: 'Tháng',value: 'time',sortable: true},\r\n                    {title: 'Ngày thanh toán',value: 'paymentDate',sortable: true},\r\n                    {title: 'Trạng thái',value: 'status',sortable: true},\r\n                    {title: 'Hành đồng',value: 'actions',sortable: false}\r\n                ],\r\n            billData: [\r\n            ],\r\n            selectBill: {\r\n                id: 0,\r\n                numberOfRoom:'',\r\n                priceRoom: 0,\r\n                addressTower: '',\r\n                amount: 0,\r\n                date: '',\r\n                pathImgQRPay:'',\r\n                stk: '',\r\n                status: 0,\r\n                service: [\r\n                    {\r\n                        id: 0,\r\n                        isOldNewNumber: false,\r\n                        name: '',\r\n                        newNumber: null,\r\n                        oldNumber: null,\r\n                        unitPrice: 0,\r\n                        usageNumber: 1,\r\n                    }\r\n                ],\r\n                arises:[\r\n                    {\r\n                        id: 0,\r\n                        amount: 0,\r\n                        reason: '',\r\n                    }\r\n                ]\r\n            },\r\n            CalculateRoom:[\r\n            ],\r\n            searchCustomer: '',\r\n            searchRoom: '',\r\n            searchDate: '',\r\n            searchStatus: null,\r\n            viewdialogEdit:false,\r\n            viewdialogCalculateRoomCharges: false,\r\n            towerId: 0,\r\n            message: '',\r\n            snackbar: false,\r\n            snackbarColor: '',\r\n        }\r\n    },\r\n    created(){\r\n        const idtower = this.$route.params.idtower;\r\n        const DecodingIdTower = CryptoJS.enc.Utf8.stringify(CryptoJS.enc.Base64.parse(idtower));\r\n        this.towerId = DecodingIdTower;\r\n        this.getAllBill();\r\n    },\r\n    computed: {\r\n        filteredBills() {\r\n            return this.billData.filter((bill) => {\r\n                const matchesCustomer = this.searchCustomer\r\n                    ? bill.customerName?.toLowerCase().includes(this.searchCustomer.toLowerCase())\r\n                    : true;\r\n\r\n                const matchesRoom = this.searchRoom\r\n                    ? bill.numberOfRoom?.toLowerCase().includes(this.searchRoom.toLowerCase())\r\n                    : true;\r\n\r\n                const matchesDate = this.searchDate\r\n                    ? bill.time === this.searchDate.split('-').reverse().join('/')\r\n                    : true;\r\n                const matchesStatus = this.searchStatus\r\n                    ? bill.status?.toLowerCase() === this.searchStatus.toLowerCase()\r\n                    : true;\r\n\r\n                return matchesCustomer && matchesRoom && matchesDate && matchesStatus;\r\n            });\r\n        },\r\n    },\r\n    methods:{\r\n        deleteBill(id,name) {\r\n                const swalWithBootstrapButtons = Swal.mixin({\r\n                customClass: {\r\n                    confirmButton: \"btn btn-success\",\r\n                    cancelButton: \"btn btn-danger ml-2\",\r\n                },\r\n                buttonsStyling: false,\r\n            });\r\n\r\n            swalWithBootstrapButtons\r\n                .fire({\r\n                    title: \"Bạn có chắc chắn không?\",\r\n                    text: `Bạn đang muốn xóa hoá đơn của phòng: ${name}`,\r\n                    icon: \"warning\",\r\n                    confirmButtonText: \"Có!\",\r\n                    cancelButtonText: \"Không!\",\r\n                    showCancelButton: true,\r\n                })\r\n                .then((confirm) => {\r\n                    if (confirm.value) {\r\n                            apiClient.delete(`/Bill/Delete/${id}`)\r\n                                    .then(reponse=> {\r\n                                        if(reponse.status){\r\n                                            swalWithBootstrapButtons.fire(\r\n                                            \"Xóa thành công!\",\r\n                                            `Đã xóa thành công hoá đơn của phòng: ${name}`,\r\n                                            \"success\")\r\n                                            this.getAllBill();\r\n                                        }\r\n                                    })\r\n                                    .catch(error =>{\r\n                                        swalWithBootstrapButtons.fire(\r\n                                            \"Xóa không thành công\",\r\n                                            ` ${error.response?.data?.message || error.message}`,\r\n                                            \"error\"\r\n                                        );\r\n                                    })\r\n                    } else if ( /* Read more about handling dismissals below */ confirm.dismiss === Swal.DismissReason.cancel) return\r\n                });\r\n            },\r\n        required (v) {\r\n            return !!v || 'Vui lòng không để trống'\r\n        },\r\n        DetailBill(idBill){\r\n            apiClient.get(`/Bill/GetDetail?billId=${idBill}`)\r\n                    .then(response=>{\r\n                        this.selectBill = response.data;\r\n                    })\r\n                    .catch(error=>{\r\n                        this.message = \"Lấy thông tin hoá đơn bị lỗi: \" + error.response?.data?.message || error.message;\r\n                        this.snackbar = true;\r\n                        this.snackbarColor = 'red';\r\n                    })\r\n        },\r\n        getStatusClass(status) {\r\n            switch (status) {\r\n                case 'Đã thanh toán':\r\n                    return 'badge bg-light-success ms-2'; // class dành cho trạng thái Active\r\n                case 'Chưa thanh toán':\r\n                    return 'badge bg-light-danger ms-2'; // class dành cho trạng thái Inactive\r\n                default:\r\n                    return 'badge bg-light-warning' ; // class mặc định\r\n            }\r\n        },\r\n        formatDate(dateString) {\r\n            if (!dateString) return '';\r\n            const [month, year] = dateString.split('/'); // Tách MM/YYYY\r\n            //if (!month || !year) return ''; // Xử lý nếu không đúng định dạng\r\n            return `${year}-${month.padStart(2, '0')}`; // Trả về định dạng YYYY-MM\r\n        },\r\n        getAllBill(){\r\n            apiClient.get(`/Bill/GetAll?towerId=${this.towerId}`)\r\n                    .then(response=>{\r\n                        this.billData = response.data;\r\n                    })\r\n                    .catch(error=>{\r\n                        this.snackbar = true;\r\n                        this.message = 'Lấy hoá đơn bị lỗi ' + error.response?.data?.message || error.message;\r\n                        this.snackbarColor = 'red';\r\n                    })\r\n        },\r\n        FormatTablePrice(price) {\r\n            if(price)\r\n            return common.formatTablePrice(price);\r\n        },\r\n        btnUpdate(idBill){\r\n            apiClient.get(`/Bill/GetDetail?billId=${idBill}`)\r\n                .then(response=>{\r\n                    this.selectBill = response.data;\r\n                })\r\n                .catch(error=>{\r\n                    this.message = \"Lấy thông tin hoá đơn bị lỗi: \" + error.response?.data?.message || error.message;\r\n                    this.snackbar = true;\r\n                    this.snackbarColor = 'red';\r\n                })\r\n        },\r\n        saveUpdate(){\r\n            this.selectBill.sumArises = this.selectBill.arises.reduce((sum,item) => sum + (item.amount || 0),0);\r\n            apiClient.put(`/Bill/Update`,this.selectBill)\r\n                    .then(()=>{\r\n                            this.message = \"Sửa hóa đơn thành công\";\r\n                            this.snackbar = true;\r\n                            this.snackbarColor = 'green';\r\n                            this.viewdialogEdit = false;\r\n                            this.getAllBill();\r\n                        })\r\n                        .catch(error=>{\r\n                            this.message = \"Sửa hoá đơn bị lỗi: \" + error.response?.data?.message || error;\r\n                            this.snackbar = true;\r\n                            this.snackbarColor = 'red';\r\n                        })\r\n        },\r\n        btnCalculateRoom(){\r\n            apiClient.get(`/Bill/CalculateRoom?towerId=${this.towerId}`)\r\n                    .then(response=>{\r\n                        this.CalculateRoom = response.data;\r\n                    })\r\n                    .catch(error=>{\r\n                        this.message = \"Đã xảy ra lỗi: \" + error.response?.data?.message || error;\r\n                        this.snackbar = true;\r\n                        this.snackbarColor = 'red';\r\n                    })\r\n        },\r\n        SendInvoice(){\r\n            this.CalculateRoom = {};\r\n            apiClient.post(`/Bill/SendInvoice`,this.CalculateRoom)\r\n                    .then(()=>{\r\n                            this.message = \"Tính tiền cho các phòng thành công. Hóa đơn đã được gửi đến khách thuê. Bạn hãy thi thoảng vào trang web để theo dõi trạng thái thanh toán của các khách thuê\";\r\n                            this.snackbar = true;\r\n                            this.snackbarColor = 'green';\r\n                            this.viewdialogCalculateRoomCharges = false;\r\n                            \r\n                            this.getAllBill();\r\n                        })\r\n                        .catch(error=>{\r\n                            this.message = \"Tính tiền bị lỗi: \" + error.response?.data?.message || error;\r\n                            this.snackbar = true;\r\n                            this.snackbarColor = 'red';\r\n                        })\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<template>\r\n        <pageheader title=\"\" pageTitle=\"Hoá đơn\" />\r\n        <BRow>\r\n            <v-snackbar\r\n                v-model=\"snackbar\"\r\n                :timeout=\"10000\"\r\n                class=\"custom-snackbar\"\r\n                :color=\"snackbarColor\"\r\n            >\r\n                <h5 class=\"text-center\">{{ message }}</h5>\r\n            </v-snackbar>\r\n            <BCol class=\"col-sm-12\">\r\n                <BCard>\r\n                    <BCardBody class=\"p-0\">\r\n                        <BRow>\r\n                            <BCol class=\"col-sm-3 col-6\"><input type=\"month\" class=\"form-control\" id=\"example-datemin\" v-model=\"searchDate\" min=\"2000-01-02\" placeholder=\"Chọn thời gian\"></BCol>\r\n                            <BCol class=\"col-sm-3 col-6\"><v-select label=\"Trạng thái phí\" :items=\"['Đã thanh toán','Chưa thanh toán','Chờ xác nhận thanh toán']\" v-model=\"searchStatus\" clearable hide-details></v-select></BCol>\r\n                            <BCol class=\"col-sm-3 col-4\"><v-text-field label=\"Số phòng\" variant=\"outlined\" v-model=\"searchRoom\" clearable hide-details></v-text-field></BCol>\r\n                            <BCol class=\"col-sm-3 col-4\"><v-text-field label=\"Tên khách hàng\" variant=\"outlined\" v-model=\"searchCustomer\" clearable hide-details></v-text-field></BCol>\r\n                        </BRow>\r\n                    </BCardBody>\r\n                </BCard>\r\n                <BCard no-body class=\"table-card p-sm-2\">\r\n                    <BCardBody>\r\n                        <BRow class=\"text-end pb-3\">\r\n                            <Bcol class=\"col-sm-6\"></Bcol>\r\n                            <BCol class=\"col-sm-6 col-12\"><v-btn @click=\"(viewdialogCalculateRoomCharges = !viewdialogCalculateRoomCharges) && (btnCalculateRoom())\" color=\"blue-lighten-1\" class=\"mt-2\">Tính tiền phòng</v-btn></BCol>\r\n                        </BRow>\r\n                        <v-data-table \r\n                            :headers = \"headersTable\"\r\n                            :items=\"filteredBills\"\r\n                            class=\"border-sm rounded-lg\">\r\n                            <template v-slot:[`item.stt`]=\"{ index }\">\r\n                                {{ index + 1 }}\r\n                            </template>\r\n                            <template v-slot:[`item.totalAmount`]=\"{ item }\">\r\n                                <!-- Hiển thị giá đã định dạng -->\r\n                                {{ FormatTablePrice(item.totalAmount) }}\r\n                            </template>\r\n                            <template v-slot:[`item.status`]=\"{ item }\">\r\n                                <span :class=\"getStatusClass(item.status)\">\r\n                                    {{ item.status }}\r\n                                </span>\r\n                            </template>\r\n                            <template v-slot:[`item.actions`]=\"{ item }\">\r\n                                <v-icon small @click=\"(viewdialog = !viewdialog) &&(DetailBill(item.id))\">mdi-eye</v-icon>\r\n                                <v-icon class=\"ml-lg-3\" v-show=\"item.status === 'Chưa thanh toán'\" small @click=\"(viewdialogEdit = !viewdialogEdit) && (btnUpdate(item.id)) \" >mdi-pencil-circle </v-icon>\r\n                                <v-icon class=\"ml-lg-3\"  v-show=\"item.status === 'Chưa thanh toán'\" small @click=\"deleteBill(item.id,item.numberOfRoom)\" >mdi-delete-empty </v-icon>\r\n                            </template>\r\n                        </v-data-table>\r\n                    </BCardBody>\r\n                </BCard>\r\n                <BModal v-model=\"viewdialog\" hide-footer :title=\"`Chi tiết hoá đơn phòng ${selectBill.numberOfRoom} tháng ${selectBill.date} `\" modal-class=\"fadeInRight\"\r\n                    class=\"v-modal-custom\" centered size=\"lg\" >\r\n                    <h6>Tên khách hàng: {{ selectBill.customerName }}</h6>\r\n                    <h6 v-show=\"selectBill.status == 4\">Hoá đơn đã được thanh toán vào ngày: {{ selectBill.datePayment}}</h6>\r\n                    <h6 v-show=\"selectBill.status == 3\">Hoá đơn đã được thanh toán vào ngày: {{ selectBill.datePayment}} và đang chờ xác nhận thanh toán</h6>\r\n                    <h6 v-show=\"selectBill.status == 2\">Hoá đơn chưa được thanh toán</h6>\r\n                    <h4>Chi tiết hoá đơn:</h4>\r\n                    <table class=\"table Info\" >\r\n                        <thead>\r\n                            <tr>\r\n                                <th style=\"width: 40%;\">Tên dịch vụ</th>\r\n                                <th>Số tiền</th>\r\n                                <th>Sử dụng</th>\r\n                                <th>Thành tiền</th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            <tr>\r\n                                <td>Tiền phòng</td>\r\n                                <td>{{ FormatTablePrice(selectBill.priceRoom)}}</td>\r\n                                <td>1</td>\r\n                                <td>{{ FormatTablePrice(selectBill.priceRoom)}}</td>\r\n                            </tr>\r\n                            <tr v-for=\"(serviceItem, index) in selectBill.service\" :key=\"index\">\r\n                                <td>\r\n                                    <div>Tiền {{ serviceItem.name }}</div> \r\n                                    <div v-show=\"serviceItem.newNumber != null\">(Số cũ: {{ serviceItem.oldNumber }} - Số mới: {{ serviceItem.newNumber }})</div>\r\n                                </td>\r\n                                <td>{{FormatTablePrice(serviceItem.unitPrice) }}</td>\r\n                                <td>{{ serviceItem.usageNumber }}</td>\r\n                                <td>{{FormatTablePrice(serviceItem.unitPrice * serviceItem.usageNumber) }}</td>\r\n                            </tr>\r\n                            <tr v-for=\"(arise, index) in selectBill.arises\" :key=\"index\" v-show=\"selectBill.arises.length > 0\">\r\n                                <td>Phát sinh({{ arise.reason }})</td>\r\n                                <td>{{ arise.amount }}</td>\r\n                                <td>1</td>\r\n                                <td>{{ arise.amount }}</td>\r\n                            </tr>\r\n                            <tr>\r\n                                <td colspan=\"3\"><h4>Tổng tiền</h4></td>\r\n                                <td><h4>{{FormatTablePrice(selectBill.amount) }}</h4></td>\r\n                            </tr>\r\n                        </tbody>\r\n                    </table>\r\n                </BModal>\r\n                <BModal v-model=\"viewdialogEdit\" hide-footer title=\"Sửa hoá đơn phòng 101\" modal-class=\"fadeInRight\"\r\n                    class=\"v-modal-custom\" centered size=\"lg\">\r\n                    <h6>Tên khách hàng: {{ selectBill.customerName }}</h6>\r\n                    <h6>Tiền phòng: {{ FormatTablePrice(selectBill.priceRoom) }}</h6>\r\n                    <div class=\"card-body\">\r\n                        <v-form v-model=\"form\">\r\n                            <div class=\"card\" v-for=\"(Service,index) in selectBill.service \" :key=\"index\" >\r\n                                <div class=\"card-header\" v-if=\"Service.newNumber != null\">\r\n                                    <h4>Dịch vụ {{ Service.name }}</h4>\r\n                                </div>\r\n                                <div class=\"card-body \"  v-if=\"Service.newNumber != null\">\r\n                                    <BRow>\r\n                                        <BCol class=\"col-lg-6\">\r\n                                            <div class=\"form-group\">\r\n                                                <label class=\"form-label\">Số cũ:</label>\r\n                                                <v-text-field type=\"number\" v-model=\"Service.oldNumber\" :rules=\"[v => (v !== null && v !== undefined && v !== '') || 'Trường này là bắt buộc']\" variant=\"outlined\" clearable placeholder=\"Nhập vào số cũ\" class=\"input-control\"></v-text-field>\r\n                                            </div>\r\n                                        </BCol>\r\n                                        <BCol class=\"col-lg-6\">\r\n                                            <div class=\"form-group\">\r\n                                                <label class=\"form-label\">Số mới:</label>\r\n                                                <v-text-field type=\"number\" v-model=\"Service.newNumber\" :rules=\"[required]\" variant=\"outlined\" clearable placeholder=\"Nhập vào số mới\" class=\"input-control\"></v-text-field>\r\n                                            </div>\r\n                                        </BCol>\r\n                                    </BRow>\r\n                                </div>\r\n                                <BRow class=\"align-items-center\" v-show=\"Service.newNumber == null\">\r\n                                    <BCol class=\"col-lg-4 text-center\">\r\n                                        <h5>Dịch vụ: {{ Service.name }}</h5>\r\n                                    </BCol>\r\n                                    <BCol class=\"col-lg-8\">\r\n                                        <v-text-field v-model=\"Service.usageNumber\" :rules=\"[required]\" variant=\"outlined\" clearable placeholder=\"Nhập vào số sử dụng\" class=\"input-control\"></v-text-field>\r\n                                    </BCol>\r\n                                </BRow>\r\n                            </div>\r\n                           \r\n                        </v-form>\r\n                    </div>\r\n                    <div class=\"modal-footer v-modal-footer\">\r\n                        <BButton type=\"button\" variant=\"light\" @click=\"viewdialog = false\">Close\r\n                        </BButton>\r\n                        <BButton type=\"button\" variant=\"primary\" @click=\"saveUpdate()\" :disabled=\"!form\">Save Changes</BButton>\r\n                    </div>\r\n                </BModal>\r\n                <BModal v-model=\"viewdialogCalculateRoomCharges\" hide-footer title=\"Tính tiền phòng\" modal-class=\"fadeInRight\"\r\n                    class=\"v-modal-custom\" centered size=\"lg\">\r\n                    <div class=\"card-body\">\r\n                        <v-form v-model=\"form\">\r\n                            <div class=\"card\" v-for=\"(room,index) in CalculateRoom \" :key=\"index\" >\r\n                                <div class=\"card-header\">\r\n                                    <h4>Nhập thông tin cho phòng {{ room.numberOfRoom }}</h4>\r\n                                </div>\r\n                                <div class=\"card-body\">\r\n                                    <BRow>\r\n                                        <BCol class=\"col-lg-6\" v-for=\"(service,index) in room.services\" :key=\"index\">\r\n                                            <div class=\"form-group\" v-if=\"service.isOldNewNumber == true\">\r\n                                                <label class=\"form-label\">Số {{ service.name}} (số cũ: {{ service.oldNumber}})</label>\r\n                                                <v-text-field type=\"number\" v-model=\"service.newNumber\" :rules=\"[required]\" variant=\"outlined\" clearable placeholder=\"Nhập vào số mới\" class=\"input-control\"></v-text-field>\r\n                                            </div>\r\n                                        </BCol>\r\n                                    </BRow>\r\n                                </div>\r\n                            </div>\r\n                        </v-form>\r\n                    </div>\r\n                    <div class=\"modal-footer v-modal-footer\">\r\n                        <BButton type=\"button\" variant=\"light\" @click=\"viewdialogCalculateRoomCharges = false\">Close\r\n                        </BButton>\r\n                        <BButton type=\"button\" variant=\"primary\" @click=\"SendInvoice()\" :disabled=\"!form\">Save Changes</BButton>\r\n                    </div>\r\n                </BModal>\r\n            </BCol>\r\n        </BRow>\r\n</template>"],"mappings":";;;AAOI,OAAOA,UAAS,MAAO,8BAA6B;AACpD,OAAOC,SAAQ,MAAO,iBAAiB;AACvC,OAAOC,IAAG,MAAO,aAAa;AAC9B,OAAOC,QAAO,MAAO,WAAW;AAChC,OAAOC,MAAK,MAAO,qCAAoC;AAG3D,eAAe;EACXC,IAAI,EAAE,cAAc;EACpBC,UAAU,EAAE;IACRN;EACJ,CAAC;EACDO,IAAIA,CAAA,EAAE;IACF,OAAM;MACFC,UAAU,EAAE,KAAK;MACjBC,WAAW,EAAC,EAAE;MACdC,IAAI,EAAE,KAAK;MACXC,YAAY,EAAC,CACL;QAACC,KAAK,EAAE,KAAK;QAAEC,KAAK,EAAE,KAAK;QAACC,QAAQ,EAAE;MAAI,CAAC,EAC3C;QAACF,KAAK,EAAE,gBAAgB;QAACC,KAAK,EAAC,cAAc;QAACC,QAAQ,EAAE;MAAI,CAAC,EAC7D;QAACF,KAAK,EAAE,UAAU;QAACC,KAAK,EAAE,cAAc;QAACC,QAAQ,EAAE;MAAI,CAAC,EACxD;QAACF,KAAK,EAAE,SAAS;QAACC,KAAK,EAAE,aAAa;QAACC,QAAQ,EAAE;MAAI,CAAC,EACtD;QAACF,KAAK,EAAE,OAAO;QAACC,KAAK,EAAE,MAAM;QAACC,QAAQ,EAAE;MAAI,CAAC,EAC7C;QAACF,KAAK,EAAE,iBAAiB;QAACC,KAAK,EAAE,aAAa;QAACC,QAAQ,EAAE;MAAI,CAAC,EAC9D;QAACF,KAAK,EAAE,YAAY;QAACC,KAAK,EAAE,QAAQ;QAACC,QAAQ,EAAE;MAAI,CAAC,EACpD;QAACF,KAAK,EAAE,WAAW;QAACC,KAAK,EAAE,SAAS;QAACC,QAAQ,EAAE;MAAK,EACvD;MACLC,QAAQ,EAAE,EACT;MACDC,UAAU,EAAE;QACRC,EAAE,EAAE,CAAC;QACLC,YAAY,EAAC,EAAE;QACfC,SAAS,EAAE,CAAC;QACZC,YAAY,EAAE,EAAE;QAChBC,MAAM,EAAE,CAAC;QACTC,IAAI,EAAE,EAAE;QACRC,YAAY,EAAC,EAAE;QACfC,GAAG,EAAE,EAAE;QACPC,MAAM,EAAE,CAAC;QACTC,OAAO,EAAE,CACL;UACIT,EAAE,EAAE,CAAC;UACLU,cAAc,EAAE,KAAK;UACrBtB,IAAI,EAAE,EAAE;UACRuB,SAAS,EAAE,IAAI;UACfC,SAAS,EAAE,IAAI;UACfC,SAAS,EAAE,CAAC;UACZC,WAAW,EAAE;QACjB,EACH;QACDC,MAAM,EAAC,CACH;UACIf,EAAE,EAAE,CAAC;UACLI,MAAM,EAAE,CAAC;UACTY,MAAM,EAAE;QACZ;MAER,CAAC;MACDC,aAAa,EAAC,EACb;MACDC,cAAc,EAAE,EAAE;MAClBC,UAAU,EAAE,EAAE;MACdC,UAAU,EAAE,EAAE;MACdC,YAAY,EAAE,IAAI;MAClBC,cAAc,EAAC,KAAK;MACpBC,8BAA8B,EAAE,KAAK;MACrCC,OAAO,EAAE,CAAC;MACVC,OAAO,EAAE,EAAE;MACXC,QAAQ,EAAE,KAAK;MACfC,aAAa,EAAE;IACnB;EACJ,CAAC;EACDC,OAAOA,CAAA,EAAE;IACL,MAAMC,OAAM,GAAI,IAAI,CAACC,MAAM,CAACC,MAAM,CAACF,OAAO;IAC1C,MAAMG,eAAc,GAAI9C,QAAQ,CAAC+C,GAAG,CAACC,IAAI,CAACC,SAAS,CAACjD,QAAQ,CAAC+C,GAAG,CAACG,MAAM,CAACC,KAAK,CAACR,OAAO,CAAC,CAAC;IACvF,IAAI,CAACL,OAAM,GAAIQ,eAAe;IAC9B,IAAI,CAACM,UAAU,CAAC,CAAC;EACrB,CAAC;EACDC,QAAQ,EAAE;IACNC,aAAaA,CAAA,EAAG;MACZ,OAAO,IAAI,CAAC1C,QAAQ,CAAC2C,MAAM,CAAEC,IAAI,IAAK;QAClC,MAAMC,eAAc,GAAI,IAAI,CAACzB,cAAa,GACpCwB,IAAI,CAACE,YAAY,EAAEC,WAAW,CAAC,CAAC,CAACC,QAAQ,CAAC,IAAI,CAAC5B,cAAc,CAAC2B,WAAW,CAAC,CAAC,IAC3E,IAAI;QAEV,MAAME,WAAU,GAAI,IAAI,CAAC5B,UAAS,GAC5BuB,IAAI,CAACzC,YAAY,EAAE4C,WAAW,CAAC,CAAC,CAACC,QAAQ,CAAC,IAAI,CAAC3B,UAAU,CAAC0B,WAAW,CAAC,CAAC,IACvE,IAAI;QAEV,MAAMG,WAAU,GAAI,IAAI,CAAC5B,UAAS,GAC5BsB,IAAI,CAACO,IAAG,KAAM,IAAI,CAAC7B,UAAU,CAAC8B,KAAK,CAAC,GAAG,CAAC,CAACC,OAAO,CAAC,CAAC,CAACC,IAAI,CAAC,GAAG,IAC3D,IAAI;QACV,MAAMC,aAAY,GAAI,IAAI,CAAChC,YAAW,GAChCqB,IAAI,CAAClC,MAAM,EAAEqC,WAAW,CAAC,MAAM,IAAI,CAACxB,YAAY,CAACwB,WAAW,CAAC,IAC7D,IAAI;QAEV,OAAOF,eAAc,IAAKI,WAAU,IAAKC,WAAU,IAAKK,aAAa;MACzE,CAAC,CAAC;IACN;EACJ,CAAC;EACDC,OAAO,EAAC;IACJC,UAAUA,CAACvD,EAAE,EAACZ,IAAI,EAAE;MACZ,MAAMoE,wBAAuB,GAAIvE,IAAI,CAACwE,KAAK,CAAC;QAC5CC,WAAW,EAAE;UACTC,aAAa,EAAE,iBAAiB;UAChCC,YAAY,EAAE;QAClB,CAAC;QACDC,cAAc,EAAE;MACpB,CAAC,CAAC;MAEFL,wBAAuB,CAClBM,IAAI,CAAC;QACFnE,KAAK,EAAE,yBAAyB;QAChCoE,IAAI,EAAE,wCAAwC3E,IAAI,EAAE;QACpD4E,IAAI,EAAE,SAAS;QACfC,iBAAiB,EAAE,KAAK;QACxBC,gBAAgB,EAAE,QAAQ;QAC1BC,gBAAgB,EAAE;MACtB,CAAC,EACAC,IAAI,CAAEC,OAAO,IAAK;QACf,IAAIA,OAAO,CAACzE,KAAK,EAAE;UACXZ,SAAS,CAACsF,MAAM,CAAC,gBAAgBtE,EAAE,EAAE,EAC5BoE,IAAI,CAACG,OAAO,IAAG;YACZ,IAAGA,OAAO,CAAC/D,MAAM,EAAC;cACdgD,wBAAwB,CAACM,IAAI,CAC7B,iBAAiB,EACjB,wCAAwC1E,IAAI,EAAE,EAC9C,SAAS;cACT,IAAI,CAACkD,UAAU,CAAC,CAAC;YACrB;UACJ,CAAC,EACAkC,KAAK,CAACC,KAAI,IAAI;YACXjB,wBAAwB,CAACM,IAAI,CACzB,sBAAsB,EACtB,IAAIW,KAAK,CAACC,QAAQ,EAAEpF,IAAI,EAAEmC,OAAM,IAAKgD,KAAK,CAAChD,OAAO,EAAE,EACpD,OACJ,CAAC;UACL,CAAC;QACjB,OAAO,IAAK,+CAAgD4C,OAAO,CAACM,OAAM,KAAM1F,IAAI,CAAC2F,aAAa,CAACC,MAAM,EAAE;MAC/G,CAAC,CAAC;IACN,CAAC;IACLC,QAAOA,CAAGC,CAAC,EAAE;MACT,OAAO,CAAC,CAACA,CAAA,IAAK,yBAAwB;IAC1C,CAAC;IACDC,UAAUA,CAACC,MAAM,EAAC;MACdjG,SAAS,CAACkG,GAAG,CAAC,0BAA0BD,MAAM,EAAE,EACvCb,IAAI,CAACM,QAAQ,IAAE;QACZ,IAAI,CAAC3E,UAAS,GAAI2E,QAAQ,CAACpF,IAAI;MACnC,CAAC,EACAkF,KAAK,CAACC,KAAK,IAAE;QACV,IAAI,CAAChD,OAAM,GAAI,gCAA+B,GAAIgD,KAAK,CAACC,QAAQ,EAAEpF,IAAI,EAAEmC,OAAM,IAAKgD,KAAK,CAAChD,OAAO;QAChG,IAAI,CAACC,QAAO,GAAI,IAAI;QACpB,IAAI,CAACC,aAAY,GAAI,KAAK;MAC9B,CAAC;IACb,CAAC;IACDwD,cAAcA,CAAC3E,MAAM,EAAE;MACnB,QAAQA,MAAM;QACV,KAAK,eAAe;UAChB,OAAO,6BAA6B;QAAE;QAC1C,KAAK,iBAAiB;UAClB,OAAO,4BAA4B;QAAE;QACzC;UACI,OAAO,wBAAuB;QAAI;MAC1C;IACJ,CAAC;IACD4E,UAAUA,CAACC,UAAU,EAAE;MACnB,IAAI,CAACA,UAAU,EAAE,OAAO,EAAE;MAC1B,MAAM,CAACC,KAAK,EAAEC,IAAI,IAAIF,UAAU,CAACnC,KAAK,CAAC,GAAG,CAAC,EAAE;MAC7C;MACA,OAAO,GAAGqC,IAAI,IAAID,KAAK,CAACE,QAAQ,CAAC,CAAC,EAAE,GAAG,CAAC,EAAE,EAAE;IAChD,CAAC;IACDlD,UAAUA,CAAA,EAAE;MACRtD,SAAS,CAACkG,GAAG,CAAC,wBAAwB,IAAI,CAAC1D,OAAO,EAAE,EAC3C4C,IAAI,CAACM,QAAQ,IAAE;QACZ,IAAI,CAAC5E,QAAO,GAAI4E,QAAQ,CAACpF,IAAI;MACjC,CAAC,EACAkF,KAAK,CAACC,KAAK,IAAE;QACV,IAAI,CAAC/C,QAAO,GAAI,IAAI;QACpB,IAAI,CAACD,OAAM,GAAI,qBAAoB,GAAIgD,KAAK,CAACC,QAAQ,EAAEpF,IAAI,EAAEmC,OAAM,IAAKgD,KAAK,CAAChD,OAAO;QACrF,IAAI,CAACE,aAAY,GAAI,KAAK;MAC9B,CAAC;IACb,CAAC;IACD8D,gBAAgBA,CAACC,KAAK,EAAE;MACpB,IAAGA,KAAK,EACR,OAAOvG,MAAM,CAACwG,gBAAgB,CAACD,KAAK,CAAC;IACzC,CAAC;IACDE,SAASA,CAACX,MAAM,EAAC;MACbjG,SAAS,CAACkG,GAAG,CAAC,0BAA0BD,MAAM,EAAE,EAC3Cb,IAAI,CAACM,QAAQ,IAAE;QACZ,IAAI,CAAC3E,UAAS,GAAI2E,QAAQ,CAACpF,IAAI;MACnC,CAAC,EACAkF,KAAK,CAACC,KAAK,IAAE;QACV,IAAI,CAAChD,OAAM,GAAI,gCAA+B,GAAIgD,KAAK,CAACC,QAAQ,EAAEpF,IAAI,EAAEmC,OAAM,IAAKgD,KAAK,CAAChD,OAAO;QAChG,IAAI,CAACC,QAAO,GAAI,IAAI;QACpB,IAAI,CAACC,aAAY,GAAI,KAAK;MAC9B,CAAC;IACT,CAAC;IACDkE,UAAUA,CAAA,EAAE;MACR,IAAI,CAAC9F,UAAU,CAAC+F,SAAQ,GAAI,IAAI,CAAC/F,UAAU,CAACgB,MAAM,CAACgF,MAAM,CAAC,CAACC,GAAG,EAACC,IAAI,KAAKD,GAAE,IAAKC,IAAI,CAAC7F,MAAK,IAAK,CAAC,CAAC,EAAC,CAAC,CAAC;MACnGpB,SAAS,CAACkH,GAAG,CAAC,cAAc,EAAC,IAAI,CAACnG,UAAU,EACnCqE,IAAI,CAAC,MAAI;QACF,IAAI,CAAC3C,OAAM,GAAI,wBAAwB;QACvC,IAAI,CAACC,QAAO,GAAI,IAAI;QACpB,IAAI,CAACC,aAAY,GAAI,OAAO;QAC5B,IAAI,CAACL,cAAa,GAAI,KAAK;QAC3B,IAAI,CAACgB,UAAU,CAAC,CAAC;MACrB,CAAC,EACAkC,KAAK,CAACC,KAAK,IAAE;QACV,IAAI,CAAChD,OAAM,GAAI,sBAAqB,GAAIgD,KAAK,CAACC,QAAQ,EAAEpF,IAAI,EAAEmC,OAAM,IAAKgD,KAAK;QAC9E,IAAI,CAAC/C,QAAO,GAAI,IAAI;QACpB,IAAI,CAACC,aAAY,GAAI,KAAK;MAC9B,CAAC;IACjB,CAAC;IACDwE,gBAAgBA,CAAA,EAAE;MACdnH,SAAS,CAACkG,GAAG,CAAC,+BAA+B,IAAI,CAAC1D,OAAO,EAAE,EAClD4C,IAAI,CAACM,QAAQ,IAAE;QACZ,IAAI,CAACzD,aAAY,GAAIyD,QAAQ,CAACpF,IAAI;MACtC,CAAC,EACAkF,KAAK,CAACC,KAAK,IAAE;QACV,IAAI,CAAChD,OAAM,GAAI,iBAAgB,GAAIgD,KAAK,CAACC,QAAQ,EAAEpF,IAAI,EAAEmC,OAAM,IAAKgD,KAAK;QACzE,IAAI,CAAC/C,QAAO,GAAI,IAAI;QACpB,IAAI,CAACC,aAAY,GAAI,KAAK;MAC9B,CAAC;IACb,CAAC;IACDyE,WAAWA,CAAA,EAAE;MACT,IAAI,CAACnF,aAAY,GAAI,CAAC,CAAC;MACvBjC,SAAS,CAACqH,IAAI,CAAC,mBAAmB,EAAC,IAAI,CAACpF,aAAa,EAC5CmD,IAAI,CAAC,MAAI;QACF,IAAI,CAAC3C,OAAM,GAAI,+JAA+J;QAC9K,IAAI,CAACC,QAAO,GAAI,IAAI;QACpB,IAAI,CAACC,aAAY,GAAI,OAAO;QAC5B,IAAI,CAACJ,8BAA6B,GAAI,KAAK;QAE3C,IAAI,CAACe,UAAU,CAAC,CAAC;MACrB,CAAC,EACAkC,KAAK,CAACC,KAAK,IAAE;QACV,IAAI,CAAChD,OAAM,GAAI,oBAAmB,GAAIgD,KAAK,CAACC,QAAQ,EAAEpF,IAAI,EAAEmC,OAAM,IAAKgD,KAAK;QAC5E,IAAI,CAAC/C,QAAO,GAAI,IAAI;QACpB,IAAI,CAACC,aAAY,GAAI,KAAK;MAC9B,CAAC;IACjB;EACJ;AACJ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}