{"ast":null,"code":"import { createStore } from 'vuex';\nimport modules from './modules';\nconst store = createStore({\n  modules,\n  // Enable strict mode in development to get a warning\n  // when mutating state outside of a mutation.\n  // https://vuex.vuejs.org/guide/strict.html\n  strict: process.env.NODE_ENV !== 'production',\n  state: {\n    isSidebarHidden: false,\n    isMobileSidebarActive: false,\n    isFixedWidth: false,\n    token: null,\n    userId: null\n  },\n  mutations: {\n    toggleSidebar(state) {\n      state.isSidebarHidden = !state.isSidebarHidden;\n    },\n    toggleMobileSidebar(state) {\n      state.isMobileSidebarActive = !state.isMobileSidebarActive;\n    },\n    setFullWidth(state) {\n      state.isFixedWidth = false;\n    },\n    setFixedWidth(state) {\n      state.isFixedWidth = true;\n    },\n    changeLayoutType(state, payload) {\n      state.layoutType = payload.layoutType;\n    },\n    setToken(state, token) {\n      state.token = token;\n    },\n    setUser(state, userId) {\n      state.userId = userId;\n    },\n    clearAuth(state) {\n      state.token = null;\n      state.userId = null;\n    }\n  },\n  actions: {\n    login({\n      commit\n    }, Userformation) {\n      const {\n        token,\n        userId\n      } = Userformation;\n      // Lưu token và userId vào Vuex\n      commit('setToken', token);\n      commit('setUser', userId);\n      // Cập nhật token vào header mặc định của axios\n      //axios.defaults.headers.common['Authorization'] = `Bearer ${token}`;\n    },\n    logout({\n      commit\n    }) {\n      // Xóa dữ liệu trong Vuex\n      commit('clearAuth');\n\n      // Xóa token trong localStorage\n      localStorage.removeItem('token');\n      localStorage.removeItem('landlordid');\n\n      // Xóa header Authorization\n      //delete axios.defaults.headers.common['Authorization'];\n    },\n    autoLogin({\n      commit\n    }) {\n      // Kiểm tra token trong localStorage khi tải ứng dụng\n      const token = localStorage.getItem('tokenlandlord');\n      const userId = localStorage.getItem('landlordid');\n      if (token) {\n        commit('setToken', token);\n        // Gọi thêm API để lấy userId nếu cần\n      }\n      if (userId) {\n        commit('setUser', userId);\n      }\n    }\n  },\n  getters: {\n    isFixedWidth: state => state.isFixedWidth,\n    isAuthenticated(state) {\n      return !!state.token; // Trả về true nếu token không null\n    },\n    getUserId(state) {\n      return state.userId;\n    }\n  }\n});\nexport default store;","map":{"version":3,"names":["createStore","modules","store","strict","process","env","NODE_ENV","state","isSidebarHidden","isMobileSidebarActive","isFixedWidth","token","userId","mutations","toggleSidebar","toggleMobileSidebar","setFullWidth","setFixedWidth","changeLayoutType","payload","layoutType","setToken","setUser","clearAuth","actions","login","commit","Userformation","logout","localStorage","removeItem","autoLogin","getItem","getters","isAuthenticated","getUserId"],"sources":["D:/Code/BoardingHouseManagement/BoardingHouseManagement/FrontEnd/src/state/store.js"],"sourcesContent":["import { createStore } from 'vuex';\r\nimport modules from './modules';\r\n\r\n\r\n\r\nconst store = createStore({\r\n    modules,\r\n    // Enable strict mode in development to get a warning\r\n    // when mutating state outside of a mutation.\r\n    // https://vuex.vuejs.org/guide/strict.html\r\n    strict: process.env.NODE_ENV !== 'production',\r\n    state: {\r\n        isSidebarHidden: false,\r\n        isMobileSidebarActive: false,\r\n        isFixedWidth: false,\r\n        token: null,\r\n        userId: null,\r\n    },\r\n    mutations: {\r\n        toggleSidebar(state) {\r\n            state.isSidebarHidden = !state.isSidebarHidden;\r\n        },\r\n        toggleMobileSidebar(state) {\r\n            state.isMobileSidebarActive = !state.isMobileSidebarActive;\r\n        },\r\n        setFullWidth(state) {\r\n            state.isFixedWidth = false;\r\n        },\r\n        setFixedWidth(state) {\r\n            state.isFixedWidth = true;\r\n        },\r\n        changeLayoutType(state, payload) {\r\n            state.layoutType = payload.layoutType;\r\n        },\r\n        setToken(state, token) {\r\n            state.token = token;\r\n        },\r\n        setUser(state, userId) {\r\n            state.userId = userId;\r\n        },\r\n        clearAuth(state) {\r\n            state.token = null;\r\n            state.userId = null;\r\n        },\r\n    },\r\n    actions: {\r\n        login({ commit }, Userformation) {\r\n            const { token, userId } = Userformation\r\n            // Lưu token và userId vào Vuex\r\n            commit('setToken', token);\r\n            commit('setUser', userId);\r\n            // Cập nhật token vào header mặc định của axios\r\n            //axios.defaults.headers.common['Authorization'] = `Bearer ${token}`;\r\n        },\r\n        logout({ commit }) {\r\n            // Xóa dữ liệu trong Vuex\r\n            commit('clearAuth');\r\n\r\n            // Xóa token trong localStorage\r\n            localStorage.removeItem('token');\r\n            localStorage.removeItem('landlordid');\r\n\r\n            // Xóa header Authorization\r\n            //delete axios.defaults.headers.common['Authorization'];\r\n\r\n        },\r\n        autoLogin({ commit }) {\r\n\r\n            // Kiểm tra token trong localStorage khi tải ứng dụng\r\n            const token = localStorage.getItem('tokenlandlord');\r\n            const userId = localStorage.getItem('landlordid');\r\n            if (token) {\r\n                commit('setToken', token);\r\n                // Gọi thêm API để lấy userId nếu cần\r\n            }\r\n            if(userId){\r\n                commit('setUser', userId);\r\n            }\r\n        },\r\n    },\r\n    getters: {\r\n        isFixedWidth: state => state.isFixedWidth,\r\n        isAuthenticated(state) {\r\n            return !!state.token; // Trả về true nếu token không null\r\n        },\r\n        getUserId(state) {\r\n            return state.userId;\r\n        },\r\n    },\r\n});\r\n\r\nexport default store;"],"mappings":"AAAA,SAASA,WAAW,QAAQ,MAAM;AAClC,OAAOC,OAAO,MAAM,WAAW;AAI/B,MAAMC,KAAK,GAAGF,WAAW,CAAC;EACtBC,OAAO;EACP;EACA;EACA;EACAE,MAAM,EAAEC,OAAO,CAACC,GAAG,CAACC,QAAQ,KAAK,YAAY;EAC7CC,KAAK,EAAE;IACHC,eAAe,EAAE,KAAK;IACtBC,qBAAqB,EAAE,KAAK;IAC5BC,YAAY,EAAE,KAAK;IACnBC,KAAK,EAAE,IAAI;IACXC,MAAM,EAAE;EACZ,CAAC;EACDC,SAAS,EAAE;IACPC,aAAaA,CAACP,KAAK,EAAE;MACjBA,KAAK,CAACC,eAAe,GAAG,CAACD,KAAK,CAACC,eAAe;IAClD,CAAC;IACDO,mBAAmBA,CAACR,KAAK,EAAE;MACvBA,KAAK,CAACE,qBAAqB,GAAG,CAACF,KAAK,CAACE,qBAAqB;IAC9D,CAAC;IACDO,YAAYA,CAACT,KAAK,EAAE;MAChBA,KAAK,CAACG,YAAY,GAAG,KAAK;IAC9B,CAAC;IACDO,aAAaA,CAACV,KAAK,EAAE;MACjBA,KAAK,CAACG,YAAY,GAAG,IAAI;IAC7B,CAAC;IACDQ,gBAAgBA,CAACX,KAAK,EAAEY,OAAO,EAAE;MAC7BZ,KAAK,CAACa,UAAU,GAAGD,OAAO,CAACC,UAAU;IACzC,CAAC;IACDC,QAAQA,CAACd,KAAK,EAAEI,KAAK,EAAE;MACnBJ,KAAK,CAACI,KAAK,GAAGA,KAAK;IACvB,CAAC;IACDW,OAAOA,CAACf,KAAK,EAAEK,MAAM,EAAE;MACnBL,KAAK,CAACK,MAAM,GAAGA,MAAM;IACzB,CAAC;IACDW,SAASA,CAAChB,KAAK,EAAE;MACbA,KAAK,CAACI,KAAK,GAAG,IAAI;MAClBJ,KAAK,CAACK,MAAM,GAAG,IAAI;IACvB;EACJ,CAAC;EACDY,OAAO,EAAE;IACLC,KAAKA,CAAC;MAAEC;IAAO,CAAC,EAAEC,aAAa,EAAE;MAC7B,MAAM;QAAEhB,KAAK;QAAEC;MAAO,CAAC,GAAGe,aAAa;MACvC;MACAD,MAAM,CAAC,UAAU,EAAEf,KAAK,CAAC;MACzBe,MAAM,CAAC,SAAS,EAAEd,MAAM,CAAC;MACzB;MACA;IACJ,CAAC;IACDgB,MAAMA,CAAC;MAAEF;IAAO,CAAC,EAAE;MACf;MACAA,MAAM,CAAC,WAAW,CAAC;;MAEnB;MACAG,YAAY,CAACC,UAAU,CAAC,OAAO,CAAC;MAChCD,YAAY,CAACC,UAAU,CAAC,YAAY,CAAC;;MAErC;MACA;IAEJ,CAAC;IACDC,SAASA,CAAC;MAAEL;IAAO,CAAC,EAAE;MAElB;MACA,MAAMf,KAAK,GAAGkB,YAAY,CAACG,OAAO,CAAC,eAAe,CAAC;MACnD,MAAMpB,MAAM,GAAGiB,YAAY,CAACG,OAAO,CAAC,YAAY,CAAC;MACjD,IAAIrB,KAAK,EAAE;QACPe,MAAM,CAAC,UAAU,EAAEf,KAAK,CAAC;QACzB;MACJ;MACA,IAAGC,MAAM,EAAC;QACNc,MAAM,CAAC,SAAS,EAAEd,MAAM,CAAC;MAC7B;IACJ;EACJ,CAAC;EACDqB,OAAO,EAAE;IACLvB,YAAY,EAAEH,KAAK,IAAIA,KAAK,CAACG,YAAY;IACzCwB,eAAeA,CAAC3B,KAAK,EAAE;MACnB,OAAO,CAAC,CAACA,KAAK,CAACI,KAAK,CAAC,CAAC;IAC1B,CAAC;IACDwB,SAASA,CAAC5B,KAAK,EAAE;MACb,OAAOA,KAAK,CAACK,MAAM;IACvB;EACJ;AACJ,CAAC,CAAC;AAEF,eAAeV,KAAK","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}