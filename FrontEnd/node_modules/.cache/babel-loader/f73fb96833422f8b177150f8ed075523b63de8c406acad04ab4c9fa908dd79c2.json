{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/esnext.iterator.constructor.js\";\nimport \"core-js/modules/esnext.iterator.filter.js\";\nimport \"core-js/modules/esnext.iterator.find.js\";\nimport \"core-js/modules/esnext.iterator.for-each.js\";\nimport pageheader from \"@/components/page-header.vue\";\nimport Swal from \"sweetalert2\";\nimport CryptoJS from 'crypto-js';\nimport apiClient from \"@/plugins/axios\";\nimport common from \"@/components/common/JavaScripCommon\";\nexport default {\n  name: \"ROOM\",\n  components: {\n    pageheader\n  },\n  data() {\n    return {\n      StatusFee: [{\n        title: 'Chưa thanh toán',\n        value: false\n      }, {\n        title: 'Đã thanh toán',\n        value: true\n      }],\n      StatusRoom: [{\n        title: 'Còn trống',\n        value: false\n      }, {\n        title: 'Đã cho thuê',\n        value: true\n      }],\n      headersTable: [{\n        title: 'STT',\n        value: 'stt',\n        sortable: true\n      }, {\n        title: 'Số phòng',\n        value: 'numberOfRoom',\n        sortable: true\n      }, {\n        title: 'Khách hàng',\n        value: 'customerName',\n        sortable: true\n      }, {\n        title: 'Số người ở tối da',\n        value: 'noPStaying',\n        sortable: true\n      }, {\n        title: 'Giá',\n        value: 'priceRoom',\n        sortable: true\n      }, {\n        title: 'Hành đồng',\n        value: 'actions',\n        sortable: false\n      }],\n      viewdialogDetail: false,\n      titleDialog: '',\n      viewdialogEdit: false,\n      form: false,\n      towerId: 0,\n      RoomData: [],\n      selectRoom: {\n        id: 0,\n        numberOfRoom: '',\n        equipment: '',\n        noPStaying: 0,\n        priceRoom: 0,\n        numberElectric: 0,\n        numberCountries: 0,\n        note: '',\n        imgRoom: []\n      },\n      message: '',\n      snackbar: false,\n      snackbarColor: '',\n      checkout: {},\n      viewdialogCheckOut: false,\n      viewdialogChangeRoom: false,\n      contractData: [],\n      towerData: [],\n      changeRoom: {\n        services: [{\n          serviceId: '',\n          price: '',\n          number: 1\n        }]\n      },\n      roomDataChange: [],\n      searchStatusRoom: null,\n      searchName: '',\n      searchRoomName: '',\n      servicedata: [],\n      previewUrls: []\n    };\n  },\n  created() {\n    const idtower = this.$route.params.idtower;\n    const DecodingIdTower = CryptoJS.enc.Utf8.stringify(CryptoJS.enc.Base64.parse(idtower));\n    this.towerId = DecodingIdTower;\n    this.GetRoomByTowerId();\n  },\n  computed: {\n    filteredRooms() {\n      return this.RoomData.filter(room => {\n        // Lọc theo trạng thái phí\n        // const matchesStatusFee = this.selectedStatusFee\n        // ? room.statusFee === this.selectedStatusFee\n        // : true;\n\n        // Lọc theo trạng thái phòng\n        const matchesStatusRoom = this.searchStatusRoom !== undefined && this.searchStatusRoom !== null ? this.searchStatusRoom === true && room.customerName && room.customerName.trim() !== \"\" ||\n        // Đã cho thuê\n        this.searchStatusRoom === false && (!room.customerName || room.customerName.trim() === \"\") // Còn trống\n        : true;\n\n        // Lọc theo tên khách hàng\n        const matchesSearchName = this.searchName ? room.customerName?.toLowerCase().includes(this.searchName.toLowerCase()) : true;\n\n        // Lọc theo số phòng\n        const matchesSearchRoomName = this.searchRoomName ? room.numberOfRoom?.toLowerCase().includes(this.searchRoomName.toLowerCase()) : true;\n        return matchesStatusRoom && matchesSearchName && matchesSearchRoomName;\n      });\n    }\n  },\n  methods: {\n    async loadImages() {\n      this.selectRoom.imgRoom = [];\n      for (let url of this.selectRoom.pathImgRoom) {\n        try {\n          const response = await fetch(url);\n          const blob = await response.blob(); // Chuyển phản hồi thành Blob\n          const file = new File([blob], url.split('/').pop(), {\n            type: blob.type\n          }); // Tạo File từ Blob\n          // Lưu vào mảng imgRoom\n          this.selectRoom.imgRoom.push(file);\n          console.log(`Ảnh từ ${url} đã được tải và lưu vào imgRoom.`);\n        } catch (error) {\n          console.error(`Lỗi khi tải ảnh từ ${url}:`, error);\n        }\n      }\n      console.log('Tất cả ảnh đã được tải:', this.selectRoom.imgRoom);\n    },\n    async GetRoomByTowerId() {\n      await apiClient.get(`Room/GetAllRoom/${this.towerId}`).then(reponse => {\n        this.RoomData = reponse.data;\n      }).catch(error => {\n        this.message = \"Lấy danh sách phòng bị lỗi \" + error.response?.data?.message || error.message;\n        this.snackbar = true;\n        this.snackbarColor = 'red';\n      });\n    },\n    async EditRoom(roomId, title) {\n      this.titleDialog = title;\n      if (roomId === 0) {\n        this.selectRoom = {};\n        this.form = false;\n      } else {\n        await apiClient.get(`Room/GetDetail?roomId=${roomId}`).then(reponse => {\n          this.selectRoom = reponse.data;\n        }).catch(error => {\n          this.viewdialogEdit = false;\n          this.snackbar = true;\n          this.message = 'Lấy thông tin của phòng bị lỗi ' + error.response?.data?.message || error.message;\n          this.snackbarColor = 'red';\n        });\n        this.loadImages();\n        this.handleFileChange();\n      }\n    },\n    async DetailRoom(roomId) {\n      this.titleDialog = 'Xem chi tiết phòng';\n      this.form = false;\n      await apiClient.get(`Room/GetDetail?roomId=${roomId}`).then(reponse => {\n        this.selectRoom = reponse.data;\n      }).catch(error => {\n        this.viewdialogEdit = false;\n        this.snackbar = true;\n        this.message = 'Lấy thông tin của phòng bị lỗi ' + error.response?.data?.message || error.message;\n        this.snackbarColor = 'red';\n      });\n      if (this.selectRoom.isCustomer == true) {\n        await apiClient.get(`Room/GetContractByRoomId?roomId=${roomId}`).then(reponse => {\n          this.contractData = reponse.data;\n        }).catch(error => {\n          this.viewdialogEdit = false;\n          this.snackbar = true;\n          this.message = 'Lấy thông tin hợp đồng của phòng bị lỗi ' + error.response?.data?.message || error.message;\n          this.snackbarColor = 'red';\n        });\n      }\n    },\n    deleteRoom(id, name) {\n      const swalWithBootstrapButtons = Swal.mixin({\n        customClass: {\n          confirmButton: \"btn btn-success\",\n          cancelButton: \"btn btn-danger ml-2\"\n        },\n        buttonsStyling: false\n      });\n      swalWithBootstrapButtons.fire({\n        title: \"Bạn có chắc chắn không?\",\n        text: `Bạn đang muốn xóa phòng: ${name}`,\n        icon: \"warning\",\n        confirmButtonText: \"Có!\",\n        cancelButtonText: \"Không!\",\n        showCancelButton: true\n      }).then(confirm => {\n        if (confirm.value) {\n          apiClient.delete(`/Room/DeleteRoom/${id}`).then(reponse => {\n            console.log(reponse);\n            if (reponse.status) {\n              swalWithBootstrapButtons.fire(\"Xóa thành công!\", `Đã xóa thành công phòng: ${name}`, \"success\");\n              this.GetRoomByTowerId();\n            } else {\n              swalWithBootstrapButtons.fire(\"Xóa không thành công\", `Đã xảy ra lỗi khi xóa phòng: ${name}`, \"error\");\n            }\n          }).catch(error => {\n            swalWithBootstrapButtons.fire(\"Xóa không thành công\", ` ${error.response?.data?.message || error.message}`, \"error\");\n          });\n        } else if (/* Read more about handling dismissals below */confirm.dismiss === Swal.DismissReason.cancel) return;\n      });\n    },\n    FormatTablePrice(price) {\n      return common.formatTablePrice(price);\n    },\n    required(v) {\n      return !!v || 'Vui lòng không để trống';\n    },\n    requiredNumber(v) {\n      return !!v || 'Vui lòng nhập vào số';\n    },\n    FormatPrice() {\n      this.selectRoom.priceRoom = common.formatPrice(this.selectRoom.priceRoom);\n    },\n    CheckOutRoom() {\n      this.viewdialogDetail = false;\n      this.form = true;\n    },\n    ChangeRoom(id) {\n      this.viewdialogDetail = false;\n      this.form = false;\n      this.changeRoom = {\n        roomIdOld: id,\n        services: [{\n          serviceId: '',\n          price: '',\n          number: 1\n        }]\n      };\n      apiClient.get(`/Tower/GetAllTowerByLandLordId/${1}`).then(response => {\n        this.towerData = response.data;\n      }).catch(error => {\n        this.message = 'Đã xảy ra lỗi ' + error.response?.data?.message || error.message;\n        this.snackbarColor = 'red';\n        this.snackbar = true;\n      });\n    },\n    onServiceSelected(service) {\n      const selectedService = this.servicedata.find(item => item.id === service.serviceId);\n      if (selectedService) {\n        service.price = selectedService.price;\n      } else {\n        service.price = ''; // Xóa giá nếu không có dịch vụ\n      }\n    },\n    addService() {\n      this.changeRoom.services.push({\n        serviceId: '',\n        price: '',\n        number: 1\n      });\n    },\n    closeService(index) {\n      this.changeRoom.services.splice(index, 1);\n    },\n    createEditRoom() {\n      if (this.selectRoom.id === undefined) {\n        this.message = 'Thêm thành công';\n        this.selectRoom.id = 0;\n      } else {\n        this.message = 'Sửa thành công';\n      }\n      if (!/^\\d+$/.test(this.selectRoom.priceRoom)) this.selectRoom.priceRoom = this.selectRoom.priceRoom.replace(/[^\\d]/g, '');\n      const formData = new FormData();\n      formData.append(\"id\", this.selectRoom.id);\n      formData.append(\"numberOfRoom\", this.selectRoom.numberOfRoom);\n      formData.append(\"towerId\", this.towerId);\n      formData.append(\"equipment\", this.selectRoom.equipment);\n      formData.append(\"noPStaying\", this.selectRoom.noPStaying);\n      formData.append(\"priceRoom\", this.selectRoom.priceRoom);\n      formData.append(\"numberElectric\", this.selectRoom.numberElectric ?? \"\");\n      formData.append(\"numberCountries\", this.selectRoom.numberCountries ?? \"\");\n      formData.append(\"note\", this.selectRoom.note ?? \"\");\n      this.selectRoom.imgRoom.forEach(File => {\n        formData.append(\"ImgRoom\", File);\n      });\n      console.log(this.selectRoom);\n      apiClient.post(`/Room/CreateEditRoom`, formData).then(response => {\n        if (response.status) {\n          this.snackbarColor = 'green';\n          this.snackbar = true;\n          this.viewdialogEdit = false;\n          this.GetRoomByTowerId();\n        } else {\n          this.message = 'Đã xảy ra lỗi ';\n          this.snackbarColor = 'red';\n          this.snackbar = true;\n        }\n      }).catch(error => {\n        this.message = 'Đã xảy ra lỗi ' + error.response?.data?.message || error;\n        this.snackbarColor = 'red';\n        this.snackbar = true;\n      });\n    },\n    formatDate(dateString) {\n      const date = new Date(dateString);\n      return date.toLocaleDateString('vi-VN'); // Định dạng: dd/MM/yyyy\n    },\n    async filterChangeRooms() {\n      await apiClient.get(`Room/GetRoomNoContract?towerID=${this.changeRoom.towerId}`).then(reponse => {\n        this.roomDataChange = reponse.data;\n      }).catch(error => {\n        this.message = \"Lấy danh sách phòng để đổi bị lỗi \" + error.response?.data?.message || error.message;\n        this.snackbar = true;\n        this.snackbarColor = 'red';\n      });\n      await apiClient.get(`/Service/GetAll?towerId=${this.changeRoom.towerId}`).then(reponse => {\n        this.servicedata = reponse.data;\n      }).catch(error => {\n        this.message = \"Lấy danh sách dịch vụ bị lỗi \" + error.response?.data?.message || error.message;\n        this.snackbar = true;\n        this.snackbarColor = 'red';\n      });\n    },\n    btnSaveChangeRoom() {\n      const selectedDate = new Date(this.changeRoom.timesChange); // Ngày người dùng chọn\n      const currentDate = new Date(); // Ngày hiện tại\n\n      // Đặt thời gian của currentDate và selectedDate về 00:00:00 để chỉ so sánh ngày\n      currentDate.setHours(0, 0, 0, 0);\n      selectedDate.setHours(0, 0, 0, 0);\n      if (selectedDate < currentDate) {\n        this.message = \"Thời gian đổi đang nhỏ hơn ngày hiện tại. Bạn vui lòng chọn lại\";\n        this.snackbar = true;\n        this.snackbarColor = 'red';\n      } else {\n        apiClient.put(`Room/ChangeRoom`, this.changeRoom).then(response => {\n          if (response.status) {\n            this.snackbarColor = 'green';\n            this.snackbar = true;\n            this.message = 'ĐỔi phòng thành công', this.viewdialogChangeRoom = false;\n            this.GetRoomByTowerId();\n          } else {\n            this.message = 'Đã xảy ra lỗi ';\n            this.snackbarColor = 'red';\n            this.snackbar = true;\n          }\n        }).catch(error => {\n          this.message = 'Đã xảy ra lỗi ' + error.response?.data?.message || error.message;\n          this.snackbarColor = 'red';\n          this.snackbar = true;\n        });\n      }\n    },\n    addCustomer(id) {\n      this.$store.commit('setRoom', id);\n      const encryptedId = CryptoJS.enc.Base64.stringify(CryptoJS.enc.Utf8.parse(0));\n      this.$router.push({\n        name: 'createEdit',\n        params: {\n          idcontract: encryptedId\n        }\n      });\n    },\n    handleFileChange() {\n      this.previewUrls = [];\n      if (this.selectRoom.imgRoom) {\n        for (let file of this.selectRoom.imgRoom) {\n          const reader = new FileReader();\n          reader.onload = e => {\n            this.previewUrls.push(e.target.result);\n          };\n          reader.readAsDataURL(file);\n        }\n      }\n    },\n    FineNewCustomers(roomid, roomName) {\n      apiClient.put(`/Room/FineNewCustomers/${roomid}`).then(() => {\n        this.message = `Tìm khách mới cho phòng ${roomName} thành công!`;\n        this.snackbarColor = 'green';\n        this.snackbar = true;\n        this.GetRoomByTowerId();\n      }).catch(error => {\n        this.message = 'Đã xảy ra lỗi ' + error.response?.data?.message || error;\n        this.snackbarColor = 'red';\n        this.snackbar = true;\n      });\n    },\n    CancelFineNewCustomers(roomid, roomName) {\n      apiClient.put(`/Room/CancelFineNewCustomers?roomId=${roomid}`).then(() => {\n        this.message = `Huỷ khách mới cho phòng ${roomName} thành công!`;\n        this.snackbarColor = 'green';\n        this.snackbar = true;\n        this.GetRoomByTowerId();\n      }).catch(error => {\n        this.message = 'Đã xảy ra lỗi ' + error.response?.data?.message || error;\n        this.snackbarColor = 'red';\n        this.snackbar = true;\n      });\n    }\n  }\n};","map":{"version":3,"names":["pageheader","Swal","CryptoJS","apiClient","common","name","components","data","StatusFee","title","value","StatusRoom","headersTable","sortable","viewdialogDetail","titleDialog","viewdialogEdit","form","towerId","RoomData","selectRoom","id","numberOfRoom","equipment","noPStaying","priceRoom","numberElectric","numberCountries","note","imgRoom","message","snackbar","snackbarColor","checkout","viewdialogCheckOut","viewdialogChangeRoom","contractData","towerData","changeRoom","services","serviceId","price","number","roomDataChange","searchStatusRoom","searchName","searchRoomName","servicedata","previewUrls","created","idtower","$route","params","DecodingIdTower","enc","Utf8","stringify","Base64","parse","GetRoomByTowerId","computed","filteredRooms","filter","room","matchesStatusRoom","undefined","customerName","trim","matchesSearchName","toLowerCase","includes","matchesSearchRoomName","methods","loadImages","url","pathImgRoom","response","fetch","blob","file","File","split","pop","type","push","console","log","error","get","then","reponse","catch","EditRoom","roomId","handleFileChange","DetailRoom","isCustomer","deleteRoom","swalWithBootstrapButtons","mixin","customClass","confirmButton","cancelButton","buttonsStyling","fire","text","icon","confirmButtonText","cancelButtonText","showCancelButton","confirm","delete","status","dismiss","DismissReason","cancel","FormatTablePrice","formatTablePrice","required","v","requiredNumber","FormatPrice","formatPrice","CheckOutRoom","ChangeRoom","roomIdOld","onServiceSelected","service","selectedService","find","item","addService","closeService","index","splice","createEditRoom","test","replace","formData","FormData","append","forEach","post","formatDate","dateString","date","Date","toLocaleDateString","filterChangeRooms","btnSaveChangeRoom","selectedDate","timesChange","currentDate","setHours","put","addCustomer","$store","commit","encryptedId","$router","idcontract","reader","FileReader","onload","e","target","result","readAsDataURL","FineNewCustomers","roomid","roomName","CancelFineNewCustomers"],"sources":["D:\\Code\\BoardingHouseManagement\\BoardingHouseManagement\\FrontEnd\\src\\views\\Manage\\Page\\Room.vue"],"sourcesContent":["<script>\r\n    import pageheader from \"@/components/page-header.vue\"\r\n    import Swal from \"sweetalert2\";\r\n    import CryptoJS from 'crypto-js';\r\n    import apiClient from \"@/plugins/axios\";\r\n    import common from \"@/components/common/JavaScripCommon\"\r\n\r\n    export default {\r\n        name: \"ROOM\",\r\n        components: {\r\n            pageheader\r\n        },\r\n        data(){\r\n            return{\r\n                StatusFee:[\r\n                    {title:'Chưa thanh toán', value:false},\r\n                    {title:'Đã thanh toán',value:true}\r\n                ],\r\n                StatusRoom:[\r\n                    {title: 'Còn trống', value: false},\r\n                    {title: 'Đã cho thuê', value: true}\r\n                ],\r\n                headersTable:[\r\n                    {title: 'STT', value: 'stt',sortable: true},\r\n                    {title: 'Số phòng',value:'numberOfRoom',sortable: true},\r\n                    {title: 'Khách hàng',value:'customerName',sortable: true},\r\n                    {title: 'Số người ở tối da',value: 'noPStaying',sortable: true},\r\n                    {title: 'Giá',value: 'priceRoom',sortable: true},\r\n                    {title: 'Hành đồng',value: 'actions',sortable: false}\r\n                ],\r\n                viewdialogDetail: false,\r\n                titleDialog:'',\r\n                viewdialogEdit: false,\r\n                form: false,\r\n                towerId: 0,\r\n                RoomData: [],\r\n                selectRoom: {\r\n                    id: 0,\r\n                    numberOfRoom: '',\r\n                    equipment: '',\r\n                    noPStaying: 0,\r\n                    priceRoom: 0,\r\n                    numberElectric: 0,\r\n                    numberCountries: 0,\r\n                    note: '',\r\n                    imgRoom:[\r\n\r\n                    ]\r\n                },\r\n                message: '',\r\n                snackbar: false,\r\n                snackbarColor: '',\r\n                checkout: {},\r\n                viewdialogCheckOut: false,\r\n                viewdialogChangeRoom: false,\r\n                contractData: [],\r\n                towerData: [],\r\n                changeRoom: {\r\n                    services:[\r\n                    {\r\n                        serviceId: '',\r\n                        price: '',\r\n                        number: 1,\r\n                    },\r\n                ],\r\n                },\r\n                roomDataChange: [],\r\n                searchStatusRoom: null,\r\n                searchName: '',\r\n                searchRoomName: '',\r\n                servicedata: [],\r\n                previewUrls: [],\r\n            }\r\n        },\r\n        created(){\r\n            const idtower = this.$route.params.idtower;\r\n            const DecodingIdTower = CryptoJS.enc.Utf8.stringify(CryptoJS.enc.Base64.parse(idtower));\r\n            this.towerId = DecodingIdTower;\r\n            this.GetRoomByTowerId();\r\n        },\r\n        computed:{\r\n            filteredRooms() {\r\n                return this.RoomData.filter((room) => {\r\n                    // Lọc theo trạng thái phí\r\n                    // const matchesStatusFee = this.selectedStatusFee\r\n                    // ? room.statusFee === this.selectedStatusFee\r\n                    // : true;\r\n\r\n                    // Lọc theo trạng thái phòng\r\n                    const matchesStatusRoom = this.searchStatusRoom !== undefined && this.searchStatusRoom !== null\r\n                    ? (this.searchStatusRoom === true && room.customerName && room.customerName.trim() !== \"\") || // Đã cho thuê\r\n                        (this.searchStatusRoom === false && (!room.customerName || room.customerName.trim() === \"\")) // Còn trống\r\n                    : true;\r\n\r\n                    // Lọc theo tên khách hàng\r\n                    const matchesSearchName = this.searchName\r\n                    ? room.customerName?.toLowerCase().includes(this.searchName.toLowerCase())\r\n                    : true;\r\n\r\n                    // Lọc theo số phòng\r\n                    const matchesSearchRoomName = this.searchRoomName\r\n                    ? room.numberOfRoom?.toLowerCase().includes(this.searchRoomName.toLowerCase())\r\n                    : true;\r\n\r\n                    return matchesStatusRoom &&  matchesSearchName && matchesSearchRoomName;\r\n                });\r\n            },\r\n        },\r\n        methods:{\r\n            async loadImages(){\r\n                this.selectRoom.imgRoom = [];\r\n                for (let url of this.selectRoom.pathImgRoom) {\r\n                    try {\r\n                    \r\n                        const response = await fetch(url);\r\n                        \r\n                        const blob = await response.blob(); // Chuyển phản hồi thành Blob\r\n                        const file = new File([blob], url.split('/').pop(), { type: blob.type }); // Tạo File từ Blob\r\n                        // Lưu vào mảng imgRoom\r\n                    this.selectRoom.imgRoom.push(file);\r\n                        console.log(`Ảnh từ ${url} đã được tải và lưu vào imgRoom.`);\r\n                    } catch (error) {\r\n                        console.error(`Lỗi khi tải ảnh từ ${url}:`, error);\r\n                    }\r\n                }\r\n                console.log('Tất cả ảnh đã được tải:', this.selectRoom.imgRoom);\r\n            },\r\n            async GetRoomByTowerId(){\r\n                await apiClient.get(`Room/GetAllRoom/${this.towerId}`)\r\n                    .then(reponse =>{\r\n                        this.RoomData =reponse.data;\r\n                    })\r\n                    .catch(error =>{\r\n                        this.message = \"Lấy danh sách phòng bị lỗi \" + error.response?.data?.message || error.message;\r\n                        this.snackbar = true;\r\n                        this.snackbarColor = 'red';\r\n                    })\r\n            },\r\n            async EditRoom(roomId,title){\r\n                this.titleDialog = title;\r\n                if(roomId ===0){\r\n                    this.selectRoom = {};\r\n                    this.form = false;\r\n                }\r\n                else{\r\n                    await apiClient.get(`Room/GetDetail?roomId=${roomId}`)\r\n                            .then(reponse => {\r\n                                this.selectRoom = reponse.data;\r\n                            })\r\n                            .catch(error=>{\r\n                                this.viewdialogEdit = false;\r\n                                this.snackbar = true;\r\n                                this.message = 'Lấy thông tin của phòng bị lỗi ' + error.response?.data?.message || error.message;\r\n                                this.snackbarColor = 'red';\r\n                            })\r\n                    this.loadImages();\r\n                    this.handleFileChange();\r\n                }\r\n            },\r\n            async DetailRoom(roomId){\r\n                this.titleDialog = 'Xem chi tiết phòng';\r\n                this.form = false;\r\n                await apiClient.get(`Room/GetDetail?roomId=${roomId}`)\r\n                            .then(reponse => {\r\n                                this.selectRoom = reponse.data;\r\n                            })\r\n                            .catch(error=>{\r\n                                this.viewdialogEdit = false;\r\n                                this.snackbar = true;\r\n                                this.message = 'Lấy thông tin của phòng bị lỗi ' + error.response?.data?.message || error.message;\r\n                                this.snackbarColor = 'red';\r\n                            })\r\n                if(this.selectRoom.isCustomer == true){\r\n                    await apiClient.get(`Room/GetContractByRoomId?roomId=${roomId}`)\r\n                    .then(reponse => {\r\n                        this.contractData = reponse.data;\r\n                    })\r\n                    .catch(error=>{\r\n                        this.viewdialogEdit = false;\r\n                        this.snackbar = true;\r\n                        this.message = 'Lấy thông tin hợp đồng của phòng bị lỗi ' + error.response?.data?.message || error.message;\r\n                        this.snackbarColor = 'red';\r\n                    })\r\n                }\r\n            },\r\n            deleteRoom(id,name) {\r\n                const swalWithBootstrapButtons = Swal.mixin({\r\n                customClass: {\r\n                    confirmButton: \"btn btn-success\",\r\n                    cancelButton: \"btn btn-danger ml-2\",\r\n                },\r\n                buttonsStyling: false,\r\n            });\r\n\r\n            swalWithBootstrapButtons\r\n                .fire({\r\n                    title: \"Bạn có chắc chắn không?\",\r\n                    text: `Bạn đang muốn xóa phòng: ${name}`,\r\n                    icon: \"warning\",\r\n                    confirmButtonText: \"Có!\",\r\n                    cancelButtonText: \"Không!\",\r\n                    showCancelButton: true,\r\n                })\r\n                .then((confirm) => {\r\n                    if (confirm.value) {\r\n                            apiClient.delete(`/Room/DeleteRoom/${id}`)\r\n                                    .then(reponse=> {\r\n                                        console.log(reponse)\r\n                                        if(reponse.status){\r\n                                            swalWithBootstrapButtons.fire(\r\n                                            \"Xóa thành công!\",\r\n                                            `Đã xóa thành công phòng: ${name}`,\r\n                                            \"success\")\r\n                                            this.GetRoomByTowerId();\r\n                                        }\r\n                                        else{\r\n                                            swalWithBootstrapButtons.fire(\r\n                                                \"Xóa không thành công\",\r\n                                                `Đã xảy ra lỗi khi xóa phòng: ${name}`,\r\n                                                \"error\"\r\n                                            );\r\n                                        }\r\n                                    })\r\n                                    .catch(error =>{\r\n                                        swalWithBootstrapButtons.fire(\r\n                                            \"Xóa không thành công\",\r\n                                            ` ${error.response?.data?.message || error.message}`,\r\n                                            \"error\"\r\n                                        );\r\n                                    })\r\n                    } else if ( /* Read more about handling dismissals below */ confirm.dismiss === Swal.DismissReason.cancel) return\r\n                });\r\n            },\r\n            FormatTablePrice(price) {\r\n                return common.formatTablePrice(price);\r\n            },\r\n            required (v) {\r\n                return !!v || 'Vui lòng không để trống'\r\n            },\r\n            requiredNumber (v) {\r\n                return !!v || 'Vui lòng nhập vào số'\r\n            },\r\n            FormatPrice(){\r\n                this.selectRoom.priceRoom = common.formatPrice(this.selectRoom.priceRoom);\r\n            },\r\n            CheckOutRoom(){\r\n                this.viewdialogDetail = false;\r\n                this.form = true;\r\n            },\r\n            ChangeRoom(id){\r\n                this.viewdialogDetail = false;\r\n                this.form = false;\r\n                this.changeRoom = {\r\n                    roomIdOld : id,\r\n                    services:[\r\n                        {\r\n                            serviceId: '',\r\n                            price: '',\r\n                            number: 1,\r\n                        }\r\n                    ],\r\n                }\r\n                apiClient.get(`/Tower/GetAllTowerByLandLordId/${1}`)\r\n                        .then(response=>{\r\n                            this.towerData = response.data;\r\n                        })\r\n                        .catch(error =>{\r\n                            this.message = 'Đã xảy ra lỗi ' + error.response?.data?.message || error.message;\r\n                            this.snackbarColor = 'red'\r\n                            this.snackbar = true\r\n                        })\r\n            },\r\n\r\n            onServiceSelected(service){\r\n                const selectedService = this.servicedata.find(item => item.id === service.serviceId);\r\n                if (selectedService) {\r\n                    service.price = selectedService.price;\r\n                } else {\r\n                    service.price = ''; // Xóa giá nếu không có dịch vụ\r\n                }\r\n            },\r\n            addService(){\r\n                this.changeRoom.services.push({\r\n                    serviceId: '',\r\n                    price: '',\r\n                    number: 1,\r\n                })\r\n            },\r\n            closeService(index){\r\n                this.changeRoom.services.splice(index, 1);\r\n            },\r\n            createEditRoom(){\r\n                if(this.selectRoom.id === undefined){\r\n                    this.message = 'Thêm thành công'\r\n                    this.selectRoom.id = 0;\r\n                }\r\n                else{\r\n                    this.message = 'Sửa thành công'\r\n                }\r\n                if(!/^\\d+$/.test(this.selectRoom.priceRoom))\r\n                this.selectRoom.priceRoom =  this.selectRoom.priceRoom.replace(/[^\\d]/g, '');\r\n                const formData = new FormData();\r\n                formData.append(\"id\",this.selectRoom.id);\r\n                formData.append(\"numberOfRoom\", this.selectRoom.numberOfRoom);\r\n                formData.append(\"towerId\", this.towerId);\r\n                formData.append(\"equipment\",this.selectRoom.equipment);\r\n                formData.append(\"noPStaying\", this.selectRoom.noPStaying);\r\n                formData.append(\"priceRoom\", this.selectRoom.priceRoom);\r\n                formData.append(\"numberElectric\",this.selectRoom.numberElectric ?? \"\");\r\n                formData.append(\"numberCountries\", this.selectRoom.numberCountries ?? \"\");\r\n                formData.append(\"note\", this.selectRoom.note ?? \"\");\r\n                this.selectRoom.imgRoom.forEach((File)=>{\r\n                    formData.append(\"ImgRoom\", File);\r\n                })\r\n                console.log(this.selectRoom);\r\n                apiClient.post(`/Room/CreateEditRoom`,formData)\r\n                .then(response => {\r\n                    if(response.status){\r\n                        this.snackbarColor = 'green'\r\n                        this.snackbar = true\r\n                        this.viewdialogEdit = false\r\n                        this.GetRoomByTowerId();\r\n                    }\r\n                    else{\r\n                        this.message = 'Đã xảy ra lỗi '\r\n                        this.snackbarColor = 'red'\r\n                        this.snackbar = true\r\n                    }\r\n                })\r\n                .catch(error =>{\r\n                    this.message = 'Đã xảy ra lỗi ' + error.response?.data?.message || error\r\n                    this.snackbarColor = 'red'\r\n                    this.snackbar = true\r\n                })\r\n            },\r\n            formatDate(dateString) {\r\n                const date = new Date(dateString);\r\n                return date.toLocaleDateString('vi-VN'); // Định dạng: dd/MM/yyyy\r\n            },\r\n            async filterChangeRooms(){\r\n                await apiClient.get(`Room/GetRoomNoContract?towerID=${this.changeRoom.towerId}`)\r\n                    .then(reponse =>{\r\n                        this.roomDataChange =reponse.data;\r\n                    })\r\n                    .catch(error =>{\r\n                        this.message = \"Lấy danh sách phòng để đổi bị lỗi \" + error.response?.data?.message || error.message;\r\n                        this.snackbar = true;\r\n                        this.snackbarColor = 'red';\r\n                    })\r\n                await apiClient.get(`/Service/GetAll?towerId=${this.changeRoom.towerId}`)\r\n                .then(reponse =>{\r\n                    this.servicedata = reponse.data;\r\n                })\r\n                .catch(error =>{\r\n                    this.message = \"Lấy danh sách dịch vụ bị lỗi \"+ error.response?.data?.message || error.message;\r\n                    this.snackbar = true;\r\n                    this.snackbarColor = 'red';\r\n                })\r\n            },\r\n            btnSaveChangeRoom(){\r\n                const selectedDate = new Date(this.changeRoom.timesChange); // Ngày người dùng chọn\r\n                const currentDate = new Date(); // Ngày hiện tại\r\n\r\n                // Đặt thời gian của currentDate và selectedDate về 00:00:00 để chỉ so sánh ngày\r\n                currentDate.setHours(0, 0, 0, 0);\r\n                selectedDate.setHours(0, 0, 0, 0);\r\n\r\n                if (selectedDate < currentDate) {\r\n                    this.message = \"Thời gian đổi đang nhỏ hơn ngày hiện tại. Bạn vui lòng chọn lại\";\r\n                    this.snackbar = true;\r\n                    this.snackbarColor = 'red';\r\n                } else {\r\n                    apiClient.put(`Room/ChangeRoom`,this.changeRoom)\r\n                        .then(response => {\r\n                            if(response.status){\r\n                                this.snackbarColor = 'green'\r\n                                this.snackbar = true\r\n                                this.message = 'ĐỔi phòng thành công',\r\n                                this.viewdialogChangeRoom = false\r\n                                this.GetRoomByTowerId();\r\n                            }\r\n                            else{\r\n                                this.message = 'Đã xảy ra lỗi '\r\n                                this.snackbarColor = 'red'\r\n                                this.snackbar = true\r\n                            }\r\n                        })\r\n                        .catch(error =>{\r\n                            this.message = 'Đã xảy ra lỗi ' + error.response?.data?.message || error.message\r\n                            this.snackbarColor = 'red'\r\n                            this.snackbar = true\r\n                        })\r\n                }\r\n            },\r\n            addCustomer(id){\r\n                this.$store.commit('setRoom', id);\r\n                const encryptedId = CryptoJS.enc.Base64.stringify(CryptoJS.enc.Utf8.parse(0));\r\n                this.$router.push({ name: 'createEdit', params: { idcontract: encryptedId } });\r\n            },\r\n            handleFileChange() {\r\n                this.previewUrls = [];\r\n                if (this.selectRoom.imgRoom) {\r\n                    for (let file of this.selectRoom.imgRoom) {\r\n                    const reader = new FileReader();\r\n                    reader.onload = (e) => {\r\n                        this.previewUrls.push(e.target.result);\r\n                    };\r\n                    reader.readAsDataURL(file);\r\n                    }\r\n                }\r\n            },\r\n            FineNewCustomers(roomid,roomName){\r\n                apiClient.put(`/Room/FineNewCustomers/${roomid}`)\r\n                        .then(()=>{\r\n                            this.message = `Tìm khách mới cho phòng ${roomName} thành công!`\r\n                            this.snackbarColor = 'green'\r\n                            this.snackbar = true\r\n                            this.GetRoomByTowerId();\r\n                        })\r\n                        .catch(error=>{\r\n                            this.message = 'Đã xảy ra lỗi ' + error.response?.data?.message || error\r\n                            this.snackbarColor = 'red'\r\n                            this.snackbar = true\r\n                        })\r\n            },\r\n            CancelFineNewCustomers(roomid,roomName){\r\n                apiClient.put(`/Room/CancelFineNewCustomers?roomId=${roomid}`)\r\n                        .then(()=>{\r\n                            this.message = `Huỷ khách mới cho phòng ${roomName} thành công!`\r\n                            this.snackbarColor = 'green'\r\n                            this.snackbar = true\r\n                            this.GetRoomByTowerId();\r\n                        })\r\n                        .catch(error=>{\r\n                            this.message = 'Đã xảy ra lỗi ' + error.response?.data?.message || error\r\n                            this.snackbarColor = 'red'\r\n                            this.snackbar = true\r\n                        })\r\n            }\r\n        }\r\n}\r\n</script>\r\n\r\n<template>\r\n        <pageheader title=\"\" pageTitle=\"Phòng\" />\r\n        <BRow>\r\n            <Bcol class=\"col-sm-12\">\r\n                <v-snackbar\r\n                    v-model=\"snackbar\"\r\n                    :timeout=\"10000\"\r\n                    class=\"custom-snackbar\"\r\n                    :color=\"snackbarColor\"\r\n                >\r\n                    <h5 class=\"text-center\">{{ message }}</h5>\r\n                </v-snackbar>\r\n                <BCard>\r\n                    <BCardBody class=\"p-0\">\r\n                        <BRow>\r\n                            <BCol class=\"col-sm-3 col-6\">            \r\n                                <v-select\r\n                                    clearable\r\n                                    label=\"Trạng thái phí\"\r\n                                    :items=\"StatusFee\"\r\n                                    item-title=\"title\"\r\n                                    item-value=\"value\"\r\n                                    variant=\"outlined\"\r\n                                    hide-details>\r\n                                </v-select>\r\n                            </BCol>\r\n                            <BCol class=\"col-sm-3 col-6\">\r\n                                <v-select\r\n                                    clearable\r\n                                    label=\"Trạng thái phòng\"\r\n                                    :items=\"StatusRoom\"\r\n                                    item-title=\"title\"\r\n                                    item-value=\"value\"\r\n                                    v-model=\"searchStatusRoom\"\r\n                                    variant=\"outlined\"\r\n                                    hide-details>\r\n                                </v-select>\r\n                            </BCol>\r\n                            <Bcol class=\"col-sm-3 col-6\"><v-text-field label=\"Tên khách hàng\" variant=\"outlined\" v-model=\"searchName\" clearable hide-details></v-text-field></Bcol>\r\n                            <BCol class=\"col-sm-3 col-6\">\r\n                                <v-text-field label=\"Số phòng\" variant=\"outlined\" v-model=\"searchRoomName\" clearable hide-details></v-text-field>\r\n                            </BCol>\r\n                        </BRow>\r\n                    </BCardBody>\r\n                </BCard>\r\n                <BCard no-body class=\"table-card p-sm-2\">\r\n                    <BCardBody>\r\n                        <BRow class=\"text-end pb-3\">\r\n                            <BCol class=\"col-sm-9 col-6\"><v-btn color=\"blue-lighten-1\" class=\"mt-2\" @click=\"(viewdialogEdit = !viewdialogEdit) && (EditRoom(0,'Thêm dịch vụ'))\"> Thêm phòng</v-btn></BCol>\r\n                            <BCol class=\"col-sm-3 col-6\"><v-btn color=\"blue-lighten-1\" class=\"mt-2\"> Tính tiền Phòng</v-btn></BCol>\r\n                        </BRow>\r\n                        <v-data-table \r\n                        :headers = \"headersTable\"\r\n                            :items=\"filteredRooms\"\r\n                            class=\"border-sm rounded-lg\">\r\n                            <template v-slot:[`item.stt`]=\"{ index }\">\r\n                                {{ index + 1 }}\r\n                            </template>\r\n                            <template v-slot:[`item.customerName`]=\"{ item }\">\r\n                                <div>\r\n                                    <template v-if=\"item.customerName\">\r\n                                    {{ item.customerName }}\r\n                                    </template>\r\n                                    <template v-else>\r\n                                    <v-btn color=\"primary\" @click=\"addCustomer(item.id)\">\r\n                                        Thêm khách\r\n                                    </v-btn>\r\n                                    </template>\r\n                                </div>\r\n                            </template>\r\n                            <template v-slot:[`item.priceRoom`]=\"{ item }\">\r\n                                <!-- Hiển thị giá đã định dạng -->\r\n                                {{ FormatTablePrice(item.priceRoom) }}\r\n                            </template>\r\n                            <template v-slot:[`item.actions`]=\"{ item }\">\r\n                                <v-icon small @click=\"(viewdialogDetail = !viewdialogDetail)&& (DetailRoom(item.id))\" title=\"Xem chi tiết\">mdi-eye</v-icon>\r\n                                <v-icon class=\"ml-lg-3\" small @click=\"(viewdialogEdit = !viewdialogEdit) && (EditRoom(item.id,'Sửa dịch vụ'))\" title=\"Sửa phòng\" >mdi-pencil-circle </v-icon>\r\n                                <v-icon class=\"ml-lg-3\" v-show=\"!item.customerName\" small @click=\"deleteRoom(item.id,item.numberOfRoom)\" title=\"Xoá phòng\" >mdi-delete-empty </v-icon>\r\n                                <v-icon class=\"ml-lg-3\" v-show=\"item.customerName\" small @click=\"(viewdialogCheckOut = !viewdialogCheckOut) && (CheckOutRoom(item.id))\" title=\"Trả phòng\">mdi-refresh</v-icon>\r\n                                <v-icon class=\"ml-lg-3\" v-show=\"item.customerName\" small @click=\"(viewdialogChangeRoom = !viewdialogChangeRoom) && (ChangeRoom(item.id))\" title=\"Đổi phòng\">mdi-swap-horizontal</v-icon>\r\n                                <v-icon class=\"ml-lg-3\" v-show=\"item.status == false\" small @click=\"FineNewCustomers(item.id,item.numberOfRoom)\">mdi-account-multiple-plus</v-icon>\r\n                                <v-icon class=\"ml-lg-3\" v-show=\"item.status == true\" small @click=\"(viewdialogChangeRoom = !viewdialogChangeRoom) && (ChangeRoom(item.id))\">mdi-account-multiple-remove</v-icon>\r\n                            </template>\r\n                        </v-data-table>\r\n                    </BCardBody>\r\n                </BCard>\r\n                <BModal v-model=\"viewdialogEdit\" hide-footer :title=\"titleDialog\" modal-class=\"fadeInRight\"\r\n                    class=\"v-modal-custom\" centered size=\"lg\" >\r\n                    <div class=\"card-body\">\r\n                        <v-form v-model=\"form\" ref=\"form\">\r\n                            <BRow>\r\n                                <BCol class=\"col-lg-6\">\r\n                                    <div class=\"form-group\">\r\n                                        <label class=\"form-label\">Số phòng:</label>\r\n                                        <v-text-field v-model=\"selectRoom.numberOfRoom\" :rules=\"[required]\" variant=\"outlined\" clearable placeholder=\"Nhập vào số phòng\" class=\"input-control\"></v-text-field>\r\n                                    </div>\r\n                                </BCol>\r\n                                <BCol class=\"col-lg-6\">\r\n                                    <div class=\"form-group\">\r\n                                        <label class=\"form-label\">Thiết bị:</label>\r\n                                        <v-text-field v-model=\"selectRoom.equipment\" :rules=\"[required]\" type=\"text\" variant=\"outlined\" clearable placeholder=\"Nhập vào các thiết bị có trong phòng\" class=\"input-control\"></v-text-field>\r\n                                    </div>\r\n                                </BCol>\r\n                                <BCol class=\"col-lg-6\">\r\n                                    <div class=\"form-group\">\r\n                                        <label class=\"form-label\">Số người ở:</label>\r\n                                        <v-text-field v-model=\"selectRoom.noPStaying\" :rules=\"[requiredNumber]\" type=\"number\" variant=\"outlined\" clearable placeholder=\"Nhập vào số người tối đa được ở\" class=\"input-control\"></v-text-field>\r\n                                    </div>\r\n                                </BCol>\r\n                                <BCol class=\"col-lg-6\">\r\n                                    <div class=\"form-group\">\r\n                                        <label class=\"form-label\">Giá:</label>\r\n                                        <v-text-field v-model=\"selectRoom.priceRoom\" :rules=\"[requiredNumber]\" type=\"text\" @input=\"FormatPrice\" variant=\"outlined\" clearable placeholder=\"Nhập vào giá phòng\" class=\"input-control\"></v-text-field>\r\n                                    </div>\r\n                                </BCol>\r\n                                <BCol class=\"col-lg-6\">\r\n                                    <div class=\"form-group\">\r\n                                        <label class=\"form-label\">Số điện(nếu có):</label>\r\n                                        <v-text-field v-model=\"selectRoom.numberElectric\"  type=\"number\" variant=\"outlined\" clearable placeholder=\"Nhập vào số người tối đa được ở\" class=\"input-control\"></v-text-field>\r\n                                    </div>\r\n                                </BCol>\r\n                                <BCol class=\"col-lg-6\">\r\n                                    <div class=\"form-group\">\r\n                                        <label class=\"form-label\">Số nước(nếu có):</label>\r\n                                        <v-text-field v-model=\"selectRoom.numberCountries\" type=\"number\" variant=\"outlined\" clearable placeholder=\"Nhập vào số người tối đa được ở\" class=\"input-control\"></v-text-field>\r\n                                    </div>\r\n                                </BCol>\r\n                                <BCol class=\"col-lg-12\">\r\n                                    <div class=\"form-group\">\r\n                                        <label class=\"form-label\">Ghi chú:</label>\r\n                                        <v-text-field v-model=\"selectRoom.note\" type=\"text\" variant=\"outlined\" clearable placeholder=\"Nhập vào số người tối đa được ở\" class=\"input-control\"></v-text-field>\r\n                                    </div>\r\n                                </BCol>\r\n                                <BCol class=\"col-lg-12\">\r\n                                    <div class=\"form-group\">\r\n                                        <label class=\"form-label\">Ảnh phòng:</label>\r\n                                        <v-file-input\r\n                                            v-model=\"selectRoom.imgRoom\"\r\n                                            multiple\r\n                                            accept=\"image/*\"\r\n                                            show-size\r\n                                            @change=\"handleFileChange\"\r\n                                        ></v-file-input>\r\n                                    </div>\r\n                                </BCol>\r\n                                <v-row>\r\n                                    <v-col\r\n                                        v-for=\"(file, index) in selectRoom.imgRoom\"\r\n                                        :key=\"index\"\r\n                                        cols=\"12\"\r\n                                        sm=\"6\"\r\n                                        md=\"3\"\r\n                                    >\r\n                                        <v-img\r\n                                            :src=\"previewUrls[index] || selectRoom.pathImgRoom[index]\"\r\n                                            aspect-ratio=\"1\"\r\n                                            class=\"mb-4\"\r\n                                        ></v-img>\r\n                                        <p>{{ file.name }}</p>\r\n                                    </v-col>\r\n                                </v-row>\r\n                            </BRow>\r\n                        </v-form>\r\n                    </div>\r\n                    <div class=\"modal-footer v-modal-footer\">\r\n                        <BButton type=\"button\" variant=\"light\" @click=\"viewdialogEdit = false\">Close\r\n                        </BButton>\r\n                        <BButton type=\"button\" variant=\"primary\" @click=\"createEditRoom()\" :disabled=\"!form\">Save Changes</BButton>\r\n                    </div>\r\n                </BModal>\r\n                <BModal v-model=\"viewdialogDetail\" hide-footer :title=\"titleDialog\" modal-class=\"fadeInRight\"\r\n                    class=\"v-modal-custom\" centered size=\"xl\" >\r\n                    <div class=\"card-body\">\r\n                        <BTabs class=\"mb-3\" content-class=\"mt-3\">\r\n                            <BTab title=\"Thông tin phòng\" id=\"home\" active>\r\n                                <div class=\"card-body\">\r\n                                    <v-form v-model=\"form\" ref=\"form\">\r\n                                        <BRow>\r\n                                            <BCol class=\"col-lg-4\">\r\n                                                <div class=\"form-group\">\r\n                                                    <label class=\"form-label\">Số phòng:</label>\r\n                                                    <v-text-field v-model=\"selectRoom.numberOfRoom\" :rules=\"[required]\" variant=\"outlined\"  readonly class=\"input-control\"></v-text-field>\r\n                                                </div>\r\n                                            </BCol>\r\n                                            <BCol class=\"col-lg-4\">\r\n                                                <div class=\"form-group\">\r\n                                                    <label class=\"form-label\">Thiết bị:</label>\r\n                                                    <v-text-field v-model=\"selectRoom.equipment\" :rules=\"[required]\" type=\"text\" variant=\"outlined\" readonly class=\"input-control\"></v-text-field>\r\n                                                </div>\r\n                                            </BCol>\r\n                                            <BCol class=\"col-lg-4\">\r\n                                                <div class=\"form-group\">\r\n                                                    <label class=\"form-label\">Số người ở:</label>\r\n                                                    <v-text-field v-model=\"selectRoom.noPStaying\" :rules=\"[requiredNumber]\" type=\"number\" variant=\"outlined\" readonly  class=\"input-control\"></v-text-field>\r\n                                                </div>\r\n                                            </BCol>\r\n                                            <BCol class=\"col-lg-4\">\r\n                                                <div class=\"form-group\">\r\n                                                    <label class=\"form-label\">Giá:</label>\r\n                                                    <v-text-field v-model=\"selectRoom.priceRoom\" :rules=\"[requiredNumber]\" type=\"text\" @input=\"FormatPrice\" variant=\"outlined\" readonly  class=\"input-control\"></v-text-field>\r\n                                                </div>\r\n                                            </BCol>\r\n                                            <BCol class=\"col-lg-4\">\r\n                                                <div class=\"form-group\">\r\n                                                    <label class=\"form-label\">Số điện(nếu có):</label>\r\n                                                    <v-text-field v-model=\"selectRoom.numberElectric\"  type=\"number\" variant=\"outlined\" readonly  class=\"input-control\"></v-text-field>\r\n                                                </div>\r\n                                            </BCol>\r\n                                            <BCol class=\"col-lg-4\">\r\n                                                <div class=\"form-group\">\r\n                                                    <label class=\"form-label\">Số nước(nếu có):</label>\r\n                                                    <v-text-field v-model=\"selectRoom.numberCountries\" type=\"number\" variant=\"outlined\" readonly  class=\"input-control\"></v-text-field>\r\n                                                </div>\r\n                                            </BCol>\r\n                                            <BCol class=\"col-lg-12\">\r\n                                                <div class=\"form-group\">\r\n                                                    <label class=\"form-label\">Ghi chú:</label>\r\n                                                    <v-text-field v-model=\"selectRoom.note\" type=\"number\" variant=\"outlined\" readonly class=\"input-control\"></v-text-field>\r\n                                                </div>\r\n                                            </BCol>\r\n                                            <div class=\"form-group\">\r\n                                                <label class=\"form-label\">Ảnh phòng:</label>\r\n                                                <v-row>\r\n                                                    <v-col\r\n                                                        v-for=\"(file, index) in selectRoom.pathImgRoom\"\r\n                                                        :key=\"index\"\r\n                                                        cols=\"12\"\r\n                                                        sm=\"6\"\r\n                                                        md=\"3\"\r\n                                                    >\r\n                                                        <v-img\r\n                                                            :src=\"selectRoom.pathImgRoom[index]\"\r\n                                                            aspect-ratio=\"1\"\r\n                                                            class=\"mb-4\"\r\n                                                        ></v-img>\r\n                                                    </v-col>\r\n                                                </v-row>\r\n                                            </div>\r\n                                        </BRow>\r\n                                    </v-form>\r\n                                </div>\r\n                            </BTab>\r\n                            <BTab title=\"Thông tin hợp đồng\" v-if=\"selectRoom.isCustomer == true\">\r\n                                <div class=\"card-body\" >\r\n                                    <BRow>\r\n                                        <BCol class=\"col-lg-4\">\r\n                                            <div class=\"form-group\">\r\n                                                <label class=\"form-label\">Ngày bắt đầu:</label>\r\n                                                <v-text-field v-model=\"contractData.startDate\" :value=\"formatDate(contractData.startDate)\" variant=\"outlined\" readonly class=\"input-control\"></v-text-field>\r\n                                            </div>\r\n                                        </BCol>\r\n                                        <BCol class=\"col-lg-4\">\r\n                                            <div class=\"form-group\">\r\n                                                <label class=\"form-label\">Ngày kết thúc:</label>\r\n                                                <v-text-field v-model=\"contractData.endDate\" :value=\"formatDate(contractData.endDate)\" type=\"text\" variant=\"outlined\" readonly class=\"input-control\"></v-text-field>\r\n                                            </div>\r\n                                        </BCol>\r\n                                        <BCol class=\"col-lg-4\">\r\n                                            <div class=\"form-group\">\r\n                                                <label class=\"form-label\">Tiền cọc:</label>\r\n                                                <v-text-field v-model=\"contractData.deposit\"  variant=\"outlined\" readonly class=\"input-control\"></v-text-field>\r\n                                            </div>\r\n                                        </BCol>\r\n                                        <BCol class=\"col-lg-12\">\r\n                                            <div class=\"form-group\">\r\n                                                <label class=\"form-label\">Ghi chú:</label>\r\n                                                <v-text-field v-model=\"contractData.note\"   variant=\"outlined\" readonly class=\"input-control\"></v-text-field>\r\n                                            </div>\r\n                                        </BCol>\r\n                                    </BRow>\r\n                                </div>\r\n                            </BTab>\r\n                            <BTab title=\"Thông tin khách hàng\" v-if=\"selectRoom.isCustomer == true\">\r\n                                <div class=\"card\" v-for=\"(customer,index) in contractData.customers \" :key=\"index\">\r\n                                    <div class=\"card-header\">\r\n                                        <h4>Khách hàng {{ index + 1 }}</h4>\r\n                                    </div>\r\n                                    <div class=\"card-body\" >\r\n                                        <BRow>\r\n                                            <BCol class=\"col-lg-4\">\r\n                                                <div class=\"form-group\">\r\n                                                    <label class=\"form-label\">Họ và tên:</label>\r\n                                                    <v-text-field v-model=\"customer.fullName\" variant=\"outlined\" readonly class=\"input-control\"></v-text-field>\r\n                                                </div>\r\n                                            </BCol>\r\n                                            <BCol class=\"col-lg-4\">\r\n                                                <div class=\"form-group\">\r\n                                                    <label class=\"form-label\">Ngày sinh:</label>\r\n                                                    <v-text-field v-model=\"customer.doB\" :value=\"formatDate(customer.doB)\" type=\"text\" variant=\"outlined\" readonly class=\"input-control\"></v-text-field>\r\n                                                </div>\r\n                                            </BCol>\r\n                                            <BCol class=\"col-lg-4\">\r\n                                                <div class=\"form-group\">\r\n                                                    <label class=\"form-label\">Số điện thoại:</label>\r\n                                                    <v-text-field v-model=\"customer.phoneNumber\"  variant=\"outlined\" readonly class=\"input-control\"></v-text-field>\r\n                                                </div>\r\n                                            </BCol>\r\n                                            <BCol class=\"col-lg-4\">\r\n                                                <div class=\"form-group\">\r\n                                                    <label class=\"form-label\">Email:</label>\r\n                                                    <v-text-field v-model=\"customer.email\"   variant=\"outlined\" readonly class=\"input-control\"></v-text-field>\r\n                                                </div>\r\n                                            </BCol>\r\n                                            <BCol class=\"col-lg-4\">\r\n                                                <div class=\"form-group\">\r\n                                                    <label class=\"form-label\">CCCD:</label>\r\n                                                    <v-text-field v-model=\"customer.cccd\" variant=\"outlined\" readonly class=\"input-control\"></v-text-field>\r\n                                                </div>\r\n                                            </BCol>\r\n                                            <BCol class=\"col-lg-4\">\r\n                                                <div class=\"form-group\">\r\n                                                    <label class=\"form-label\">Địa chỉ:</label>\r\n                                                    <v-text-field v-model=\"customer.address\" variant=\"outlined\" readonly class=\"input-control\"></v-text-field>\r\n                                                </div>\r\n                                            </BCol>\r\n                                        </BRow>\r\n                                    </div>\r\n                                </div>\r\n                            </BTab>\r\n                        </BTabs>\r\n                    </div>\r\n                </BModal>\r\n                <BModal v-model=\"viewdialogCheckOut\" hide-footer title=\"Trả phòng\" modal-class=\"fadeInRight\"\r\n                    class=\"v-modal-custom\" centered size=\"lg\" >\r\n                    <div class=\"card-body\">\r\n                        <v-form v-model=\"form\" ref=\"form\">\r\n                            <BRow>\r\n                                <BCol class=\"col-lg-6\">\r\n                                    <div class=\"form-group\">\r\n                                        <label class=\"form-label\">Số điện(nếu có):</label>\r\n                                        <v-text-field v-model=\"checkout.newNumberElectric\"  type=\"number\" variant=\"outlined\" clearable placeholder=\"Nhập vào số phòng\" class=\"input-control\"></v-text-field>\r\n                                    </div>\r\n                                </BCol>\r\n                                <BCol class=\"col-lg-6\">\r\n                                    <div class=\"form-group\">\r\n                                        <label class=\"form-label\">Số nước(nếu có):</label>\r\n                                        <v-text-field v-model=\"checkout.newNumberCountries\"  type=\"number\" variant=\"outlined\" clearable placeholder=\"Nhập vào các thiết bị có trong phòng\" class=\"input-control\"></v-text-field>\r\n                                    </div>\r\n                                </BCol>\r\n                                <BCol class=\"col-lg-6\">\r\n                                    <div class=\"form-group\">\r\n                                        <label class=\"form-label\">Tiền phạt(nếu có):</label>\r\n                                        <v-text-field v-model=\"checkout.moneyPunish\" type=\"number\" variant=\"outlined\" clearable placeholder=\"Nhập vào số người tối đa được ở\" class=\"input-control\"></v-text-field>\r\n                                    </div>\r\n                                </BCol>\r\n                                <BCol class=\"col-lg-6\">\r\n                                    <div class=\"form-group\">\r\n                                        <label class=\"form-label\">Ghi chú(nếu có):</label>\r\n                                        <v-text-field v-model=\"checkout.note\" type=\"number\" @input=\"FormatPrice\" variant=\"outlined\" clearable placeholder=\"Nhập vào giá phòng\" class=\"input-control\"></v-text-field>\r\n                                    </div>\r\n                                </BCol>\r\n                            </BRow>\r\n                        </v-form>\r\n                    </div>\r\n                    <div class=\"modal-footer v-modal-footer\">\r\n                        <BButton type=\"button\" variant=\"light\" @click=\"viewdialogCheckOut = false\">Close\r\n                        </BButton>\r\n                        <BButton type=\"button\" variant=\"primary\" @click=\"CreateEditService()\" :disabled=\"!form\">Save Changes</BButton>\r\n                    </div>\r\n                </BModal>\r\n                <BModal v-model=\"viewdialogChangeRoom\" hide-footer title=\"Đổi phòng\" modal-class=\"fadeInRight\"\r\n                    class=\"v-modal-custom\" centered size=\"xl\" >\r\n                    <div class=\"card-body\">\r\n                        <v-form v-model=\"form\" ref=\"form\">\r\n                            <BRow>\r\n                                <BCol class=\"col-lg-12\">\r\n                                    <div class=\"form-group\">\r\n                                        <label class=\"form-label\">Nhà trọ:</label>\r\n                                        <v-select\r\n                                            clearable\r\n                                            :items=\"towerData\"\r\n                                            item-title=\"address\"\r\n                                            item-value=\"id\"\r\n                                            variant=\"outlined\"\r\n                                            v-model=\"changeRoom.towerId\"\r\n                                            @update:modelValue=\"filterChangeRooms\">\r\n                                        </v-select>\r\n                                    </div>\r\n                                </BCol>\r\n                                <BCol class=\"col-lg-4\">\r\n                                    <div class=\"form-group\">\r\n                                        <label class=\"form-label\">Phòng:</label>\r\n                                        <v-select\r\n                                            clearable\r\n                                            :items=\"roomDataChange\"\r\n                                            :disabled=\"!changeRoom.towerId\"\r\n                                            item-title=\"name\"\r\n                                            item-value=\"id\"\r\n                                            variant=\"outlined\"\r\n                                            v-model=\"changeRoom.roomIdNew\">\r\n                                        </v-select>\r\n                                    </div>\r\n                                </BCol>\r\n                                <BCol class=\"col-lg-4\">\r\n                                    <div class=\"form-group\">\r\n                                        <label class=\"form-label\">Thơi gian đổi</label>\r\n                                        <input type=\"date\" class=\"form-control\" id=\"example-datemin\" :rules=\"[required]\" min=\"2000-01-02\" v-model=\"changeRoom.timesChange\">\r\n                                    </div>\r\n                                </BCol>\r\n                                <BCol class=\"col-lg-4\">\r\n                                    <div class=\"form-group\">\r\n                                        <label class=\"form-label\">Thời hạn hợp đồng</label>\r\n                                        <v-text-field v-model=\"changeRoom.contractPeriod\" type=\"number\" :rules=\"[required]\" variant=\"outlined\" clearable placeholder=\"Nhập vào số tháng thời hạn hợp đồng\" class=\"input-control\"></v-text-field>\r\n                                    </div>\r\n                                </BCol>\r\n                                <div class=\"card\" v-show=\"changeRoom.towerId\" v-for=\"(service, index) in changeRoom.services\" :key=\"index\">\r\n                                    <div class=\"card-header d-flex justify-content-between\">\r\n                                        <h4 class=\"card-title\">Thông tin của dịch vụ {{ index + 1 }}</h4>\r\n                                        <v-btn v-show=\"index >= 1\" class=\"btn btn-primary\" @click=\"closeService(index)\">Đóng</v-btn>\r\n                                    </div>\r\n                                    <div class=\"row mt-4 card-body\">\r\n                                        <div class=\"col-sm-5\">\r\n                                            <div class=\"form-group\">\r\n                                            <label class=\"form-label\">Tên dịch vụ: </label>\r\n                                            <v-select\r\n                                                clearable\r\n                                                :items=\"servicedata\"\r\n                                                item-title=\"name\"\r\n                                                item-value=\"id\"\r\n                                                variant=\"outlined\"\r\n                                                v-model=\"service.serviceId\"\r\n                                                @update:model-value=\"onServiceSelected(service)\"\r\n                                                :rules=\"[required]\">\r\n                                            </v-select>\r\n                                            </div>\r\n                                        </div>\r\n                                        <div class=\"col-sm-4\">\r\n                                            <div class=\"form-group\">\r\n                                            <label class=\"form-label\">Giá: </label>\r\n                                            <v-text-field variant=\"outlined\" clearable @input=\"FormatPrice(index)\" :rules=\"[requiredNumber]\" v-model=\"service.price\" ></v-text-field>\r\n                                            </div>\r\n                                        </div>\r\n                                        <div class=\"col-sm-3\">\r\n                                            <div class=\"form-group\">\r\n                                            <label class=\"form-label\">Số lượng người dùng: </label>\r\n                                            <v-text-field type=\"number\" variant=\"outlined\" :rules=\"[requiredNumber]\" v-model=\"service.number\" clearable></v-text-field>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                                <v-btn v-show=\"changeRoom.towerId\" class=\"btn btn-primary\" @click=\"addService\">Thêm dịch vụ</v-btn>\r\n                            </BRow>\r\n                        </v-form>\r\n                    </div>\r\n                    <div class=\"modal-footer v-modal-footer\">\r\n                        <BButton type=\"button\" variant=\"light\" @click=\"viewdialogChangeRoom = false\">Close\r\n                        </BButton>\r\n                        <BButton type=\"button\" variant=\"primary\" @click=\"btnSaveChangeRoom()\" :disabled=\"!form\">Save Changes</BButton>\r\n                    </div>\r\n                </BModal>\r\n            </Bcol>\r\n        </BRow>\r\n</template>\r\n<style>\r\n    \r\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}