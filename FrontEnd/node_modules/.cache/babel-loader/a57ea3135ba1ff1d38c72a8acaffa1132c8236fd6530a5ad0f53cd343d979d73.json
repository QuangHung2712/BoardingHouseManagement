{"ast":null,"code":"import \"core-js/modules/esnext.iterator.constructor.js\";\nimport \"core-js/modules/esnext.iterator.filter.js\";\nimport common from \"@/components/common/JavaScripCommon\";\nimport apiClient from '@/plugins/axios';\nexport default {\n  name: \"Enter-Bill-Information\",\n  components: {},\n  created() {\n    const idBill = this.$route.params.idbill;\n    console.log(idBill);\n    this.getinfoBill(idBill);\n  },\n  data() {\n    return {\n      Status: false,\n      email: 'Quanghungksdtqn@gmail.com',\n      address: 'Số 11 Ngõ 91 Đường Cầu Diễn Phường Cầu Diễn Quận Nam Từ Liêm Thành phố Hà Nội',\n      qrPay: '/eb67b8edadf110af49e0.jpg',\n      BillData: {\n        id: 0,\n        numberOfRoom: '',\n        priceRoom: 0,\n        addressTower: '',\n        amount: null,\n        date: '',\n        pathImgQRPay: '',\n        stk: '',\n        status: 0,\n        service: [{\n          id: 0,\n          isOldNewNumber: false,\n          name: '',\n          newNumber: null,\n          oldNumber: null,\n          unitPrice: 0,\n          usageNumber: 1\n        }],\n        arises: [{\n          id: 0,\n          amount: 0,\n          reason: ''\n        }]\n      },\n      message: '',\n      snackbar: false,\n      snackbarColor: ''\n    };\n  },\n  computed: {\n    filteredServicesFalse() {\n      return this.BillData.service.filter(item => !item.isOldNewNumber);\n    },\n    filteredServicesTrue() {\n      return this.BillData.service.filter(item => item.isOldNewNumber);\n    }\n  },\n  methods: {\n    FormatPrice(price) {\n      return common.formatTablePrice(price);\n    },\n    getinfoBill(idBill) {\n      apiClient.get(`/Bill/GetInfoBill?billId=${idBill}`).then(response => {\n        this.BillData = response.data;\n        console.log(response.data);\n      }).catch(error => {\n        this.message = \"Lấy thông tin hoá đơn bị lỗi: \" + error.response?.data?.message || error.message;\n        this.snackbar = true;\n        this.snackbarColor = 'red';\n      });\n    },\n    btnCalculateInvoice() {\n      apiClient.put(`/Bill/CalculateInvoice`, this.BillData).then(() => {\n        this.message = \"Tính tiền hoá đơn thành công. Đây là hoá đơn của bạn\";\n        this.snackbar = true;\n        this.snackbarColor = 'green';\n        window.location.reload();\n      }).catch(error => {\n        this.message = \"Tính tiền hoá đơn bị lỗi: \" + error.response?.data?.message || error.message;\n        this.snackbar = true;\n        this.snackbarColor = 'red';\n      });\n    }\n  }\n};","map":{"version":3,"names":["common","apiClient","name","components","created","idBill","$route","params","idbill","console","log","getinfoBill","data","Status","email","address","qrPay","BillData","id","numberOfRoom","priceRoom","addressTower","amount","date","pathImgQRPay","stk","status","service","isOldNewNumber","newNumber","oldNumber","unitPrice","usageNumber","arises","reason","message","snackbar","snackbarColor","computed","filteredServicesFalse","filter","item","filteredServicesTrue","methods","FormatPrice","price","formatTablePrice","get","then","response","catch","error","btnCalculateInvoice","put","window","location","reload"],"sources":["D:\\Code\\BoardingHouseManagement\\BoardingHouseManagement\\FrontEnd\\src\\views\\Manage\\Page\\Bill\\EnterBillInformation.vue"],"sourcesContent":["<style scoped>\r\n    .table{\r\n        text-align: center;\r\n    }\r\n</style>\r\n<script>\r\n    import common from \"@/components/common/JavaScripCommon\"\r\n    import apiClient from '@/plugins/axios';\r\n\r\n    export default {\r\n        name: \"Enter-Bill-Information\",\r\n        components: {\r\n        },\r\n        created(){\r\n            const idBill = this.$route.params.idbill;\r\n            console.log(idBill);\r\n            this.getinfoBill(idBill);\r\n        },\r\n        data(){\r\n            return{\r\n                Status : false,\r\n                email: 'Quanghungksdtqn@gmail.com',\r\n                address: 'Số 11 Ngõ 91 Đường Cầu Diễn Phường Cầu Diễn Quận Nam Từ Liêm Thành phố Hà Nội',\r\n                qrPay: '/eb67b8edadf110af49e0.jpg',\r\n                BillData:{\r\n                    id: 0,\r\n                    numberOfRoom:'',\r\n                    priceRoom: 0,\r\n                    addressTower: '',\r\n                    amount: null,\r\n                    date: '',\r\n                    pathImgQRPay:'',\r\n                    stk: '',\r\n                    status: 0,\r\n                    service: [\r\n                        {\r\n                            id: 0,\r\n                            isOldNewNumber: false,\r\n                            name: '',\r\n                            newNumber: null,\r\n                            oldNumber: null,\r\n                            unitPrice: 0,\r\n                            usageNumber: 1,\r\n                        }\r\n                    ],\r\n                    arises:[\r\n                        {\r\n                            id: 0,\r\n                            amount: 0,\r\n                            reason: '',\r\n                        }\r\n                    ]\r\n                },\r\n                message: '',\r\n                snackbar: false,\r\n                snackbarColor: '',\r\n                \r\n            }\r\n        },\r\n        computed: {\r\n            filteredServicesFalse() {\r\n                return this.BillData.service.filter(item => !item.isOldNewNumber);\r\n            },\r\n            filteredServicesTrue() {\r\n                return this.BillData.service.filter(item => item.isOldNewNumber);\r\n            },\r\n        },\r\n        methods:{\r\n            FormatPrice(price) {\r\n                return common.formatTablePrice(price);\r\n            },\r\n            getinfoBill(idBill){\r\n                apiClient.get(`/Bill/GetInfoBill?billId=${idBill}`)\r\n                        .then(response=>{\r\n                            this.BillData = response.data;\r\n                            console.log(response.data);\r\n                        })\r\n                        .catch(error=>{\r\n                            this.message = \"Lấy thông tin hoá đơn bị lỗi: \" + error.response?.data?.message || error.message;\r\n                            this.snackbar = true;\r\n                            this.snackbarColor = 'red';\r\n                        })\r\n            },\r\n            btnCalculateInvoice(){\r\n                apiClient.put(`/Bill/CalculateInvoice`,this.BillData)\r\n                        .then(()=>{\r\n                            this.message = \"Tính tiền hoá đơn thành công. Đây là hoá đơn của bạn\";\r\n                            this.snackbar = true;\r\n                            this.snackbarColor = 'green';\r\n                            window.location.reload();\r\n                        })\r\n                        .catch(error=>{\r\n                            this.message = \"Tính tiền hoá đơn bị lỗi: \" + error.response?.data?.message || error.message;\r\n                            this.snackbar = true;\r\n                            this.snackbarColor = 'red';\r\n                        })\r\n            }\r\n        }\r\n    }\r\n</script>\r\n<template>\r\n    <v-container>\r\n        <v-snackbar\r\n            v-model=\"snackbar\"\r\n            :timeout=\"10000\"\r\n            class=\"custom-snackbar\"\r\n            :color=\"snackbarColor\"\r\n        >\r\n            <h5 class=\"text-center\">{{ message }}</h5>\r\n        </v-snackbar>\r\n        <div class=\"d-flex justify-center\" >\r\n            <BCard  >\r\n                <BCardHeader class=\"p-0 \">\r\n                    <h3 class=\"px-lg-16 text-center\">Nhập thông tin hoá đơn tháng {{ BillData.date }} của phòng {{ BillData.numberOfRoom }}</h3>\r\n                    <p class=\"text-center\"> <v-icon>mdi-map-marker</v-icon>Địa chỉ: {{ BillData.addressTower }}</p>\r\n                </BCardHeader>\r\n                <BCardBody>\r\n                    <BRow>\r\n                        <table class=\"table Info\" >\r\n                            <thead>\r\n                                <tr>\r\n                                    <th style=\"width: 40%;\">Tên dịch vụ</th>\r\n                                    <th>Số tiền</th>\r\n                                    <th>Sử dụng</th>\r\n                                    <th>Thành tiền</th>\r\n                                </tr>\r\n                            </thead>\r\n                            <tbody>\r\n                                <tr>\r\n                                    <td>Tiền phòng</td>\r\n                                    <td>{{ FormatPrice(BillData.priceRoom)}}</td>\r\n                                    <td>1</td>\r\n                                    <td>{{ FormatPrice(BillData.priceRoom)}}</td>\r\n                                </tr>\r\n                                <tr v-for=\"(serviceItem, index) in filteredServicesFalse\" :key=\"index\">\r\n                                    <td>{{ serviceItem.name }}</td>\r\n                                    <td>{{ FormatPrice(serviceItem.unitPrice) }}</td>\r\n                                    <td>{{ serviceItem.usageNumber }}</td>\r\n                                    <td>{{ FormatPrice(serviceItem.unitPrice * serviceItem.usageNumber) }}</td>\r\n                                </tr>\r\n                                <tr v-for=\"(arise, index) in BillData.arises\" :key=\"index\">\r\n                                    <td>Phát sinh({{ arise.reason }})</td>\r\n                                    <td>{{ FormatPrice(arise.amount) }}</td>\r\n                                    <td>1</td>\r\n                                    <td>{{ FormatPrice(arise.amount) }}</td>\r\n                                </tr>\r\n                                <tr v-for=\"(serviceItem, index) in filteredServicesTrue\" :key=\"index\" v-show=\"BillData.status != 1\">\r\n                                    <td>\r\n                                        <div>Tiền {{ serviceItem.name }}</div> \r\n                                        <div>(Số cũ: {{ serviceItem.oldNumber }} - Số mới: {{ serviceItem.newNumber }})</div>\r\n                                    </td>\r\n                                    <td>{{ FormatPrice(serviceItem.unitPrice) }}</td>\r\n                                    <td>{{ serviceItem.usageNumber }}</td>\r\n                                    <td>{{ FormatPrice(serviceItem.unitPrice * serviceItem.usageNumber) }}</td>\r\n                                </tr>\r\n                            </tbody>\r\n                        </table>\r\n                        <BRow>\r\n                            <BCol class=\"col-lg-6\">\r\n                                <h4 class=\"text-center\">Ngân hàng MB</h4>\r\n                                <h4 class=\"text-center\">STK: 0080127122002</h4>\r\n                                <h4 class=\"text-center\">Chủ tài khoản: Phạm Quang Hưng</h4>\r\n                            </BCol>\r\n                            <BCol class=\"col-lg-6\">\r\n                                <h4 class=\"text-center\">QR Ngân Hàng</h4>\r\n                                <div class=\"d-flex justify-center\">\r\n                                    <img :src=\"qrPay\" alt=\"\">\r\n                                </div>\r\n                            </BCol>\r\n                        </BRow>\r\n\r\n                        <div v-for=\"(serviceItem, index) in filteredServicesTrue\" :key=\"index\" v-show=\"BillData.status == 1\">\r\n                            <BCol class=\"col-lg-6\">\r\n                            <div class=\"form-group\">\r\n                                <label class=\"form-label\">Nhập vào số {{ serviceItem.name }} (số cũ {{ serviceItem.oldNumber }}):</label>\r\n                                <v-text-field type=\"number\" v-model=\"serviceItem.newNumber\" variant=\"outlined\" :rules=\"[v => !!v || 'Trường này là bắt buộc']\" clearable placeholder='Nhập số mới' class=\"input-control\"></v-text-field>\r\n                            </div>\r\n                        </BCol>\r\n                        </div>\r\n                    </BRow>\r\n                </BCardBody>\r\n                <BCardFooter class=\"d-flex justify-center\">\r\n                    <v-btn @click=\"btnCalculateInvoice\">Tính hoá đơn</v-btn>\r\n                </BCardFooter>\r\n            </BCard>\r\n\r\n        </div>\r\n    </v-container>\r\n    \r\n</template>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}